<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>LinkedHashMapæºç åˆ†æ</title>
    <url>/post/75655826.html</url>
    <content><![CDATA[<h1 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h1><p>LinkedHashMapæ˜¯ä¸€ç§å¯ä»¥æœ‰åºè®¿é—®çš„hashè¡¨ï¼Œå…¶å¯ä»¥æŒ‰ç…§<strong>æ’å…¥é¡ºåº</strong>æˆ–è€…<strong>è®¿é—®é¡ºåº</strong> è¿›è¡Œæ’åºè¾“å‡ºã€‚å…·ä½“å¦‚ä¸‹ï¼ŒLinkedHashMapæŒ‰ç…§é¡ºåºæ”¾å…¥äº†keyä¸º1ï¼Œ2ï¼Œ3çš„æ•°æ®ï¼Œç„¶åéå†è¾“å‡ºã€‚æ’å…¥é¡ºåºè¾“å‡º1ï¼Œ2ï¼Œ3.è®¿é—®é¡ºåºä¼šå°†æŒ‰ç…§è®¿é—®æ¬¡åºå€’æ’è¾“å‡ºï¼Œæœ€è¿‘è®¿é—®çš„æ”¾åœ¨æœ€åã€‚</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span> </span>&#123;</span><br><span class="line">    Map&lt;<span class="keyword">String</span>,<span class="keyword">String</span>&gt; <span class="built_in">map</span> = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">    <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"1"</span>,<span class="string">"1"</span>);</span><br><span class="line">    <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"2"</span>,<span class="string">"1"</span>);</span><br><span class="line">    <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"3"</span>,<span class="string">"1"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1    1</span></span><br><span class="line"><span class="comment">        2    1</span></span><br><span class="line"><span class="comment">        3    1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">map</span>.forEach((key,value)-&gt;&#123;</span><br><span class="line">        System.out.<span class="built_in">println</span>(key +<span class="string">"    "</span>+value);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    Map&lt;<span class="keyword">String</span>,<span class="keyword">String</span>&gt; map2 = <span class="keyword">new</span> LinkedHashMap&lt;<span class="keyword">String</span>,<span class="keyword">String</span>&gt;(<span class="number">16</span>,<span class="number">0.75</span>,<span class="literal">true</span>);</span><br><span class="line">    map2.<span class="built_in">put</span>(<span class="string">"1"</span>,<span class="string">"1"</span>);</span><br><span class="line">    map2.<span class="built_in">put</span>(<span class="string">"2"</span>,<span class="string">"1"</span>);</span><br><span class="line">    map2.<span class="built_in">put</span>(<span class="string">"3"</span>,<span class="string">"1"</span>);</span><br><span class="line">    map2.<span class="built_in">get</span>(<span class="string">"2"</span>);</span><br><span class="line">     <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1    1</span></span><br><span class="line"><span class="comment">        3    1</span></span><br><span class="line"><span class="comment">        2    1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">map</span>.forEach((key,value)-&gt;&#123;</span><br><span class="line">        System.out.<span class="built_in">println</span>(key +<span class="string">"    "</span>+value);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>é‚£ä¹ˆè¿™ç§ç»“æ„æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿæœ€è¿‘ä½¿ç”¨çš„æ”¾åˆ°æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„æƒ³åˆ°ä¸€ä¸ªä¸œè¥¿å°±æ˜¯LRU,æœ€è¿‘æœ€å°‘ä½¿ç”¨æ·˜æ±°ç®—æ³•.LinkedListHashMapçš„æŒ‰ç…§è®¿é—®é¡ºåºæ’åºçš„ç‰¹ç‚¹åˆšå¥½ç¬¦åˆLRUæ‰€éœ€ã€‚é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨LinkedHashMapæ¥å®ç°ä¸€ä¸ªæœ¬åœ°çš„LRUç®—æ³•ã€‚</p>
<h1 id="LinkedHashMapæºç åˆ†æ"><a href="#LinkedHashMapæºç åˆ†æ" class="headerlink" title="LinkedHashMapæºç åˆ†æ"></a>LinkedHashMapæºç åˆ†æ</h1><h2 id="æ•°æ®ç»“æ„æ˜¯ä¸€èµ·çš„åŸºç¡€"><a href="#æ•°æ®ç»“æ„æ˜¯ä¸€èµ·çš„åŸºç¡€" class="headerlink" title="æ•°æ®ç»“æ„æ˜¯ä¸€èµ·çš„åŸºç¡€"></a>æ•°æ®ç»“æ„æ˜¯ä¸€èµ·çš„åŸºç¡€</h2><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">LinkedHashMap&lt;K</span>,<span class="title">V&gt;</span></span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">HashMap&lt;K</span>,<span class="title">V&gt;</span></span></span><br><span class="line"><span class="class">    <span class="title">implements</span> <span class="title">Map&lt;K</span>,<span class="title">V&gt;</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">static <span class="class"><span class="keyword">class</span> <span class="title">Entry&lt;K</span>,<span class="title">V&gt;</span> <span class="keyword">extends</span> <span class="title">HashMap</span>.<span class="title">Node&lt;K</span>,<span class="title">V&gt;</span> </span>&#123;</span><br><span class="line">    <span class="type">Entry</span>&lt;<span class="type">K</span>,<span class="type">V</span>&gt; before, after;</span><br><span class="line">    <span class="type">Entry</span>(int hash, <span class="type">K</span> key, <span class="type">V</span> value, <span class="type">Node</span>&lt;<span class="type">K</span>,<span class="type">V</span>&gt; next) &#123;</span><br><span class="line">        <span class="keyword">super</span>(hash, key, value, next);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒLinkedHashMapç»§æ‰¿è‡ªHashMap,åŸºæœ¬æœºæ„ç›¸åŒï¼Œåªæ˜¯NodeèŠ‚ç‚¹è¿›è¡Œäº†æ‰©å±•ï¼Œå¢åŠ äº†before,afteræŒ‡é’ˆæ„å»ºä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚</p>
<p><img src="../resource/java/LinkedHashMap.jpg" alt=""></p>
<p>å…¶åœ¨hashMapçš„ç»“æ„åŸºç¡€ä¸Šå¢åŠ äº†ç”¨äºæ’åºä½¿ç”¨çš„åŒå‘é“¾è¡¨ã€‚æ•…è€Œå…¶åŸºæœ¬ç»“æ„ä¸º æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘+åŒå‘é“¾è¡¨</p>
<h2 id="é‡è¦å‡½æ•°"><a href="#é‡è¦å‡½æ•°" class="headerlink" title="é‡è¦å‡½æ•°"></a>é‡è¦å‡½æ•°</h2><p>ä¸çŸ¥ä½ æ˜¯å¦æ³¨æ„è¿‡ï¼Œåœ¨æˆ‘ä»¬è¿›è¡ŒhashMapæºç åˆ†æçš„æ—¶å€™ï¼Œåœ¨putVal,replaceï¼Œmergeç­‰æ–¹æ³•çš„æ—¶å€™ï¼Œç»å¸¸å‡ºç°ä¸¤ä¸ªæ–¹æ³• afterNodeAccesså’ŒafterNodeInsertionæ–¹æ³•ï¼Œåœ¨removeçš„æ—¶å€™è°ƒç”¨äº†afterNodeRemovalæ–¹æ³•ï¼Œè€Œè¿™ä¸‰ä¸ªæ–¹æ³•ä¾¿æ˜¯å®ç°LinkedHashMapé¡ºåºçš„åŸºç¡€ã€‚<br><img src="../resource/java/hashMapAfterAccess.jpg" alt=""></p>
<h3 id="afterNodeAccess"><a href="#afterNodeAccess" class="headerlink" title="afterNodeAccess"></a>afterNodeAccess</h3><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">void afterNodeAccess(Node&lt;K,V&gt; e) &#123; // move node to last</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; last;</span><br><span class="line">    //åªæœ‰æŒ‰ç…§è®¿é—®é¡ºåºæ’åºçš„æ—¶å€™æ‰æ›´æ–°é¡ºåº</span><br><span class="line">    <span class="keyword">if</span> (accessOrder &amp;&amp; (<span class="attr">last</span> = tail) != e) &#123;</span><br><span class="line">        LinkedHashMap.Entry&lt;K,V&gt; <span class="attr">p</span> =</span><br><span class="line">            (LinkedHashMap.Entry&lt;K,V&gt;)e, <span class="attr">b</span> = p.before, <span class="attr">a</span> = p.after;</span><br><span class="line">        //å°†eçš„åç»­è®¾ç½®ä¸º<span class="literal">null</span></span><br><span class="line">        p.<span class="attr">after</span> = <span class="literal">null</span>;</span><br><span class="line">        //ä¸‹é¢çš„ifelseç›¸å½“äºè§£é™¤eçš„å‰åå…³ç³»</span><br><span class="line">        //å¦‚æœå‰åºèŠ‚ç‚¹ä¸º<span class="literal">null</span>åˆ™è®¾ç½®å…¶ä¸ºé¦–èŠ‚ç‚¹</span><br><span class="line">        <span class="keyword">if</span> (<span class="attr">b</span> == <span class="literal">null</span>)</span><br><span class="line">            <span class="attr">head</span> = a;</span><br><span class="line">        //å¦åˆ™eçš„å‰åºèŠ‚ç‚¹çš„åç»­è®¾ç½®ä¸ºeåŸæœ¬çš„åç»­</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            b.<span class="attr">after</span> = a;</span><br><span class="line">        <span class="keyword">if</span> (a != <span class="literal">null</span>)</span><br><span class="line">            a.<span class="attr">before</span> = b;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="attr">last</span> = b;</span><br><span class="line">        //lastä¸º<span class="literal">null</span>çš„è¯ è®¾ç½®lastä¸ºp å¦åˆ™å§åŸæœ€åèŠ‚ç‚¹è®¾ç½®ä¸ºp</span><br><span class="line">        <span class="keyword">if</span> (<span class="attr">last</span> == <span class="literal">null</span>)</span><br><span class="line">            <span class="attr">head</span> = p;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            p.<span class="attr">before</span> = last;</span><br><span class="line">            last.<span class="attr">after</span> = p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attr">tail</span> = p;</span><br><span class="line">        ++modCount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="../resource/java/AccessChange.jpg" alt=""></p>
<h3 id="afterNodeRemoval"><a href="#afterNodeRemoval" class="headerlink" title="afterNodeRemoval"></a>afterNodeRemoval</h3><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">void afterNodeRemoval(Node&lt;K,V&gt; e) &#123; // unlink</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; <span class="attr">p</span> =</span><br><span class="line">        (LinkedHashMap.Entry&lt;K,V&gt;)e, <span class="attr">b</span> = p.before, <span class="attr">a</span> = p.after;</span><br><span class="line">    //åˆ é™¤eçš„å‰åæŒ‡é’ˆ</span><br><span class="line">    p.<span class="attr">before</span> = p.<span class="attr">after</span> = <span class="literal">null</span>;</span><br><span class="line">    //é‡æ–°è®¾ç½®æŒ‡å‘eçš„æŒ‡æ­£</span><br><span class="line">    <span class="keyword">if</span> (<span class="attr">b</span> == <span class="literal">null</span>)</span><br><span class="line">        <span class="attr">head</span> = a;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        b.<span class="attr">after</span> = a;</span><br><span class="line">    <span class="keyword">if</span> (<span class="attr">a</span> == <span class="literal">null</span>)</span><br><span class="line">        <span class="attr">tail</span> = b;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        a.<span class="attr">before</span> = b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="afterNodeInsertion"><a href="#afterNodeInsertion" class="headerlink" title="afterNodeInsertion"></a>afterNodeInsertion</h3><figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line">void afterNodeInsertion(boolean evict) &#123; // possibly <span class="built_in">remove</span> eldest</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; <span class="built_in">first</span>;</span><br><span class="line">    //removeEldestEntry é»˜è®¤<span class="literal">false</span> </span><br><span class="line">    <span class="keyword">if</span> (evict &amp;&amp; (<span class="built_in">first</span> = head) != null &amp;&amp; removeEldestEntry(<span class="built_in">first</span>)) &#123;</span><br><span class="line">        K <span class="built_in">key</span> = <span class="built_in">first</span>.<span class="built_in">key</span>;</span><br><span class="line">        removeNode(hash(<span class="built_in">key</span>), <span class="built_in">key</span>, null, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong>è¯¥å‡½æ•°ä¸ºLRUæä¾›äº†åŸºç¡€å‡½æ•°æ”¯æŒï¼ŒhashMapåœ¨putçš„æ—¶å€™ä¼šè°ƒç”¨afterNodeInsertionï¼Œå¦‚æœremoveEldestEntryè¿”å›trueï¼Œåˆ™åœ¨putçš„æ—¶å€™ä¼šåˆ é™¤æœ€è€çš„èŠ‚ç‚¹ã€‚</p>
<h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="built_in">get</span>(<span class="keyword">Object</span> <span class="built_in">key</span>) &#123;</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="keyword">if</span> ((e = getNode(hash(<span class="built_in">key</span>), <span class="built_in">key</span>)) == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (accessOrder)</span><br><span class="line">        afterNodeAccess(e);</span><br><span class="line">    <span class="keyword">return</span> e.value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong>å¦‚æœæ˜¯æŒ‰ç…§è®¿é—®é¡ºåºåˆ™getè·å–ä¹‹åéœ€è¦è°ƒç”¨afterNodeAccessè¿›è¡Œé¡ºåºæ›´æ–°ã€‚</p>
<h3 id="newNode-amp-LinkedNodeLast"><a href="#newNode-amp-LinkedNodeLast" class="headerlink" title="newNode&amp;LinkedNodeLast"></a>newNode&amp;LinkedNodeLast</h3><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">Node&lt;K,V&gt; <span class="keyword">new</span><span class="constructor">Node(<span class="params">int</span> <span class="params">hash</span>, K <span class="params">key</span>, V <span class="params">value</span>, Node&lt;K,V&gt; <span class="params">e</span>)</span> &#123;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; p =</span><br><span class="line">        <span class="keyword">new</span> LinkedHashMap.Entry&lt;K,V&gt;(hash, key, value, e);</span><br><span class="line">    link<span class="constructor">NodeLast(<span class="params">p</span>)</span>;</span><br><span class="line">    return p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> void link<span class="constructor">NodeLast(LinkedHashMap.Entry&lt;K,V&gt; <span class="params">p</span>)</span> &#123;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; last = tail;</span><br><span class="line">    tail = p;</span><br><span class="line">    <span class="keyword">if</span> (last<span class="operator"> == </span>null)</span><br><span class="line">        head = p;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        p.before = last;</span><br><span class="line">        last.after = p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong>LinkedHashMapé‡å†™äº†hashMapçš„newNodeæ–¹æ³•ï¼Œåœ¨åˆ›å»ºæ–°çš„èŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¼šå°†èŠ‚ç‚¹çš„beforeå’ŒafteræŒ‡é’ˆä¸tailèŠ‚ç‚¹å…³è”ä¸Šã€‚</p>
<h1 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h1><p>LinkedHashMap é›†æˆè‡ªHashMapï¼ŒåŸºç¡€æ“ä½œä¸HashMapç›¸åŒï¼ŒLinkedHashMapçš„å®ç°å¾—ç›ŠäºHashMapåœ¨åŸºç¡€æ“ä½œä¸­çš„åŸ‹ç‚¹ã€‚ä¹Ÿå°±æ˜¯ï¼šafterNodeAccessï¼ŒafterNodeInsertionå’ŒafterNodeRemovalæ–¹æ³•ã€‚æœ€ç®€å•çš„LURåªéœ€è¦ç»§æ‰¿è‡ªLinkedListHashMapï¼Œé‡å†™removeEldestEntryå³å¯ã€‚</p>
]]></content>
      <categories>
        <category>java</category>
        <category>javaé›†åˆ</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>é›†åˆ</tag>
        <tag>LinkedHashMap</tag>
      </tags>
  </entry>
  <entry>
    <title>HashMapæºç åˆ†æ</title>
    <url>/post/9749aebd.html</url>
    <content><![CDATA[<h1 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h1><p>å®è¯è¯´ï¼ŒHashMapä½œä¸ºé›†åˆä¸­æ¯”è¾ƒç»å…¸çš„ä¸€ä¸ªç±»ï¼Œå…¶åœ¨é¢è¯•ä¸­ç»å¸¸ä¼šè¢«é—®åˆ°ï¼šä¾‹å¦‚</p>
<ol>
<li>è¯´è¯´HashMapçš„åŸç†(o(â•¥ï¹â•¥)oçœŸnmç¬¼ç»Ÿ)</li>
<li>HashMapæ˜¯æ€ä¹ˆæ‰©å®¹çš„å‘¢ï¼Ÿ</li>
<li>ä¼ ç»ŸHashMap(jdk1.7)çš„hashMapæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Œå¦‚ä½•å¯¹å…¶è¿›è¡Œä¼˜åŒ–å‘¢(çº¢é»‘æ ‘)ï¼Ÿ</li>
<li>é‚£ä¹ˆåˆäº†è§£åœ¨å®é™…æƒ…å†µä¸‹ä¼šè¿›åŒ–åˆ°çº¢é»‘æ ‘çš„æ¯”ä¾‹å—ï¼Ÿ</li>
<li>HashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿä¸æ˜¯åº”è¯¥ç”¨å•¥å‘¢â€¦.å·´æ‹‰å·´æ‹‰ èƒ½æ¥ä¸€ä¸²é—®é¢˜ã€‚</li>
</ol>
<p>ç¬é—´å°±æœ‰äº†ç»§ç»­ä¸‹å»çš„åŠ¨åŠ›äº†ï¼ŒğŸ’°ğŸ’°ğŸ’°ğŸ’°</p>
<h2 id="ä¸ºå•¥éœ€è¦HashMapå‘¢ï¼Ÿ"><a href="#ä¸ºå•¥éœ€è¦HashMapå‘¢ï¼Ÿ" class="headerlink" title="ä¸ºå•¥éœ€è¦HashMapå‘¢ï¼Ÿ"></a>ä¸ºå•¥éœ€è¦HashMapå‘¢ï¼Ÿ</h2><p>å‰é¢åˆ†æäº†çº¿æ€§è¡¨çš„ä¸¤ç§å…¸å‹ç»“æ„ï¼ŒArrayListéšæœºè®¿é—®çº¿æ€§è¡¨ï¼ŒLinkedListé¡ºåºè®¿é—®çº¿æ€§è¡¨ã€‚ä½†æ˜¯å…¶éƒ½ä¸€ä¸ªç¼ºé™·ï¼Œå°±æ˜¯å¦‚æœéœ€è¦è·å–ä¸€ä¸ªå¯¹è±¡ï¼ˆæ¯”å¦‚æ‰¾å«å°æ³¢çš„ç»™æˆ‘ä¸¤å—é’±ï¼‰ï¼Œé‚£ä¹ˆæˆ‘å°±éœ€è¦éå†è¿™ä¸ªçº¿æ€§è¡¨ï¼Œå…ˆæ‰¾åˆ°è¿™ä¸ªå¼ ä¸‰ï¼Œç„¶ååœ¨ä»ä»–å…œé‡Œå·ä¸¤å—é’±ï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ— ç–‘æ˜¯O(n)çš„</p>
<p>è¿™ç§æƒ…å†µå°±éœ€è¦å“ˆå¸Œè¡¨å‡ºé©¬äº†ï¼Œæ‰€è°“çš„å“ˆå¸Œè¡¨ï¼Œå°±æ˜¯k-vç»“æ„ï¼Œä¾‹å­ä¸­kå°±æ˜¯å°æ³¢çš„åå­—ï¼Œvå°±æ˜¯å°æ³¢ï¼Œé‚£ä¹ˆæˆ‘æ‰¾å°æ³¢å°±å¯ä»¥é€šè¿‡è¿™ç§kvç»“æ„åœ¨O(1)dæ—¶é—´ä¸‹è·å–åˆ°å°æ³¢äº†ã€‚æ€§èƒ½æ— ç–‘æ˜¯éå¸¸ä¼˜è¶Šçš„ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼Ÿ</h2><p>æ‰€è°“çš„å“ˆå¸Œè¡¨ï¼Œå°±æ˜¯å°†ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡ä¸€ä¸ªå‡½æ•°è®¡ç®—å‡ºæ¥äº†è¿™ä¸ªå¯¹è±¡åº”è¯¥åœ¨æ•°ç»„ä¸­å…ƒç´ çš„ä½ç½®é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ•°ç»„åœ¨O(1)æ—¶é—´å¤æ‚åº¦å†…è·å–è¿™ä¸ªå¯¹è±¡ã€‚è€Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æ‰€è°“çš„å“ˆå¸Œå‡½æ•°ï¼Œè¿™ä¸ªæ•°ç»„å’Œå“ˆå¸Œå‡½æ•°æ•´ä½“æ„æˆäº†å“ˆå¸Œè¡¨çš„åŸºç¡€ç»„æˆã€‚</p>
<p><img src="../resource/java/%E5%93%88%E5%B8%8C%E8%A1%A8.jpg" alt=""></p>
<h2 id="å“ˆå¸Œå†²çª"><a href="#å“ˆå¸Œå†²çª" class="headerlink" title="å“ˆå¸Œå†²çª"></a>å“ˆå¸Œå†²çª</h2><p>ä»€ä¹ˆæ˜¯hashå†²çªå‘¢?<br>å“ˆå¸Œå‡½æ•°æ˜¯å“ˆå¸Œè¡¨ä¸­çš„ä¸€ä¸ªé‡è¦ç»„æˆï¼Œä½†æ˜¯å­—ç¬¦ä¸²æ˜¯æ— ç©·çš„ï¼Œå¾ˆéš¾è¯´æœ‰ä¸€ä¸ªhashå‡½æ•°ç”Ÿæˆçš„keyä¸ä¸€ä¸ªå¯¹è±¡èƒ½å¤Ÿä¸€å¯¹ä¸€å…³è”ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯èƒ½å‡ºç°ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ç”ŸæˆåŒä¸€ä¸ªkeyçš„æƒ…å†µï¼Œè¿™å°±æ˜¯hashå†²çªã€‚æœ‰äº†é—®é¢˜å°±è¦è§£å†³é—®é¢˜ï¼Œé‚£ä¹ˆå¦‚ä½•è§£å†³hashå†²çªå‘¢ï¼š</p>
<ol>
<li>å¼€æ”¾åœ°å€æ³•ã€‚å†²çªäº†å°±ç»§ç»­ä¸‹ä¸€ä¸ª</li>
<li>åœ¨hashï¼Œå†²çªäº†å°±è¿è¡ŒäºŒæ¬¡hash</li>
<li>æ‹‰é“¾æ³•ï¼Œå†²çªäº†å°±åœ¨æ•°ç»„çš„é‚£ä¸ªä½ç½®åœ¨æ‹‰ä¸ªé“¾è¡¨å‡ºæ¥ã€‚</li>
</ol>
<p><img src="../resource/java/hash%E5%86%B2%E7%AA%81.jpg" alt=""></p>
<h1 id="hashMapæºç åˆ†æ"><a href="#hashMapæºç åˆ†æ" class="headerlink" title="hashMapæºç åˆ†æ"></a>hashMapæºç åˆ†æ</h1><p>è¯´å®Œå“ˆå¸Œè¡¨è¿™ç§æ•°æ®ç»“æ„ï¼Œä»¥åŠhashå†²çªçš„è§£å†³åŠæ³•ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹HashMapçš„å®ç°ã€‚</p>
<h2 id="æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€"><a href="#æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€" class="headerlink" title="æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€"></a>æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€</h2><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> <span class="keyword">size</span>;</span><br><span class="line"><span class="comment">// å•ä¸ªå…ƒç´ ç»“æ„</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> Node&lt;K,V&gt; <span class="keyword">implements</span> Map.Entry&lt;K,V&gt; &#123;</span><br><span class="line">    <span class="comment">// hashå€¼</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">    <span class="comment">// key</span></span><br><span class="line">    <span class="keyword">final</span> K key;</span><br><span class="line">    V value;</span><br><span class="line">    <span class="comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    Node&lt;K,V&gt; <span class="keyword">next</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šè¿°æºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒhashMapåº•å±‚æ˜¯æœ‰æ•°ç»„æ¥åšåŸºç¡€æ”¯æ’‘ï¼Œä¸æˆ‘ä»¬å‰é¢è¯´çš„å“ˆå¸Œè¡¨ä¸€è‡´ã€‚hashMapä¸­å«æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œé‡‡ç”¨çš„æ˜¯æ‹‰é“¾æ³•è§£å†³å†²çªã€‚åŸºç¡€ç»“æ„å¦‚ä¸‹å›¾å·¦ä¾§æ‰€ç¤ºï¼š</p>
<p><img src="../resource/java/HashMap%E7%BB%93%E6%9E%84.jpg" alt=""></p>
<p>å·¦ä¾§ä¾¿æ˜¯jdk1.7çš„ç»“æ„ï¼Œæœ‰å›¾æ˜¯jdk1.8è¿›è¡Œçš„ä¼˜åŒ–ï¼Œå¢åŠ äº†çº¢é»‘æ ‘çš„ç»“æ„ã€‚</p>
<h2 id="å¢åˆ æ”¹æŸ¥åŸºç¡€æ“ä½œ"><a href="#å¢åˆ æ”¹æŸ¥åŸºç¡€æ“ä½œ" class="headerlink" title="å¢åˆ æ”¹æŸ¥åŸºç¡€æ“ä½œ"></a>å¢åˆ æ”¹æŸ¥åŸºç¡€æ“ä½œ</h2><h3 id="æŸ¥è¯¢-get"><a href="#æŸ¥è¯¢-get" class="headerlink" title="æŸ¥è¯¢ get()"></a>æŸ¥è¯¢ get()</h3><figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">int</span> hash(<span class="keyword">Object</span> <span class="built_in">key</span>) &#123;</span><br><span class="line">    <span class="built_in">int</span> h;</span><br><span class="line">    <span class="comment">//key==null åˆ™ç›´æ¥å–0ï¼Œå¦åˆ™hash()å–keyçš„hashCode å’Œ keyçš„hashCodeå³ç§»16ä½å–å¼‚æˆ–ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">key</span> == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = <span class="built_in">key</span>.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> V <span class="built_in">get</span>(<span class="keyword">Object</span> <span class="built_in">key</span>) &#123;</span><br><span class="line">    <span class="comment">// è·å–k = keyçš„ èŠ‚ç‚¹</span></span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="comment">//å…ˆhash key ç„¶åé€šè¿‡hashå€¼å»è·å–</span></span><br><span class="line">    <span class="keyword">return</span> (e = getNode(hash(<span class="built_in">key</span>), <span class="built_in">key</span>)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt; getNode(<span class="built_in">int</span> hash, <span class="keyword">Object</span> <span class="built_in">key</span>) &#123;</span><br><span class="line">    <span class="comment">//æ‹¿hash ä¸æ•°ç»„é•¿åº¦ n-1 å–ä¸æ“ä½œå¾—åˆ°çš„å€¼ å°±æ˜¯ç´¢å¼•</span></span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="built_in">int</span> n; K k;</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœtab[index]çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹hashå€¼ç›¸ç­‰ï¼Œå¹¶ä¸”equalsæˆ–è€…ä¸ºåŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// always check first node</span></span><br><span class="line">            ((k = first.<span class="built_in">key</span>) == <span class="built_in">key</span> || (<span class="built_in">key</span> != <span class="keyword">null</span> &amp;&amp; <span class="built_in">key</span>.equals(k))))</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">            <span class="comment">//å¦‚æœæœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ åˆ™ç»§ç»­å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ‰¾hash or equalsçš„ï¼ŒçŸ¥é“æ‰¾åˆ°æˆ–è€…æœªæ‰¾åˆ°ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, <span class="built_in">key</span>);</span><br><span class="line">            do &#123;</span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.<span class="built_in">key</span>) == <span class="built_in">key</span> || (<span class="built_in">key</span> != <span class="keyword">null</span> &amp;&amp; <span class="built_in">key</span>.equals(k))))</span><br><span class="line">                    <span class="keyword">return</span> e;</span><br><span class="line">            &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>hash()å“ˆæ•°</strong><br><img src="../resource/java/hashIndex.jpg" alt=""></p>
<p>hashå‡½æ•°çš„è·å–æ–¹å¼: é€šè¿‡keyè·å–keyçš„hashCodeã€‚é«˜16ä½ä¿æŒä¸å˜ï¼Œä½16ä½äºé«˜16ä½å¼‚æˆ–çš„ç»“æœä½œä¸ºä½16ä½ã€‚</p>
<p><strong>indexè·å–</strong></p>
<p>indexæ˜¯åˆhash()å€¼ä¸æ•°ç»„å¤§å°n-1åš &amp; andè¿ç®—çš„ç»“æœã€‚ä¸ºä»€ä¹ˆè¿™æ ·æ“ä½œã€‚ é¦–å…ˆï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªä¿¡æ¯ HashMapçš„å¤§å°éƒ½æ˜¯2^næ¬¡æ–¹ï¼ˆç¨åå˜èƒ½çœ‹åˆ°ï¼‰ã€‚é‚£ä¹ˆn-1çš„äºŒè¿›åˆ¶å˜å…¨éƒ¨éƒ½æ˜¯1ï¼Œ n-1 åšandè¿ç®—ï¼Œå°±æƒ³å½“ä¸hash()å¯¹sizeå–æ¨¡ã€‚</p>
<p><strong>get</strong><br><img src="../resource/java/hashMapget.jpg" alt=""></p>
<h3 id="å¢åŠ -ä¿®æ”¹-put"><a href="#å¢åŠ -ä¿®æ”¹-put" class="headerlink" title="å¢åŠ /ä¿®æ”¹ put()"></a>å¢åŠ /ä¿®æ”¹ put()</h3><details>
<summary><font color='red'>View Code</font></summary>

<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®k-v</span></span><br><span class="line"><span class="keyword">public</span> V put(K <span class="built_in">key</span>, V value) &#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(<span class="built_in">key</span>), <span class="built_in">key</span>, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> V putVal(<span class="built_in">int</span> hash, K <span class="built_in">key</span>, V value, <span class="built_in">boolean</span> onlyIfAbsent,</span><br><span class="line">            <span class="built_in">boolean</span> evict) &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="built_in">int</span> n, i;</span><br><span class="line">    <span class="comment">// å¦‚æœtable =null ç©º åˆ™è¿›è¡Œresizeæ‰©ç¼©å®¹å¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="comment">//å¦‚æœindexç´¢å¼•å¤„ä¸ºnullï¼Œè¡¨ç¤ºæ²¡æœ‰å‘ç”Ÿhashå†²çªï¼Œç›´æ¥è®¾ç½®å€¼</span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, <span class="built_in">key</span>, value, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯è¦æ‰¾çš„keyï¼Œe=p</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.<span class="built_in">key</span>) == <span class="built_in">key</span> || (<span class="built_in">key</span> != <span class="keyword">null</span> &amp;&amp; <span class="built_in">key</span>.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢é»‘æ ‘ï¼Œåˆ™ä»çº¢é»‘æ ‘ä¸­æ‰¾</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, <span class="built_in">key</span>, value);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//éå†åé¢çš„é“¾è¡¨ï¼Œæ‰¾åˆ°e</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    p.next = newNode(hash, <span class="built_in">key</span>, value, <span class="keyword">null</span>);</span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                        <span class="comment">//æ­¤å¤„å¦‚æœé“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼Œåˆ™ä¼šè¿›è¡Œé“¾è¡¨è½¬çº¢é»‘æ ‘å¤„ç†</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.<span class="built_in">key</span>) == <span class="built_in">key</span> || (<span class="built_in">key</span> != <span class="keyword">null</span> &amp;&amp; <span class="built_in">key</span>.equals(k))))</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°äº†èŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¸ä¸ºç©ºï¼Œå¦‚æœæ˜¯æ›¿æ¢æ¨¡å¼ putæ˜¯ï¼Œåˆ™æ›¿æ¢ï¼Œè¿”å›æ—§èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="comment">//å¦‚æœå¤§å°å¤§äºé˜ˆå€¼ï¼Œæ‰©ç¼©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (++<span class="built_in">size</span> &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<br/>

<p><strong>è¯´æ˜ï¼š</strong></p>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬äº†è§£åˆ°</p>
<ol>
<li>hashMapçš„putå¦‚æœå­˜åœ¨ï¼Œåˆ™ä¼šæ›¿æ¢æ—§å€¼</li>
<li>hashMapé˜ˆå€¼åˆ™ä¼šæ‰©å®¹å¤„ç†</li>
<li>å¦‚æœé“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼Œåˆ™ä¼šè¿›è¡Œé“¾è¡¨è½¬çº¢é»‘æ ‘å¤„ç†ã€‚</li>
</ol>
<p>é‚£ä¹ˆï¼š</p>
<ol>
<li>hashMapé“¾è¡¨è½¬çº¢é»‘æ ‘çš„é˜ˆå€¼æ˜¯å¤šå°‘å‘¢</li>
<li>hashMapæ‰©å®¹æ˜¯æ€ä¹ˆè¿›è¡Œæ‰©å®¹çš„å‘¢ã€‚</li>
<li>hashMapæ‰©ç¼©å®¹é˜ˆå€¼æ˜¯æ€ä¹ˆç¡®å®šçš„å‘¢</li>
</ol>
<p><strong><em>1.hashMapé“¾è¡¨è½¬çº¢é»‘æ ‘é˜ˆå€¼ï¼š</em></strong></p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">    * </span>The bin count threshold for using </span>a<span class="markdown"> tree rather than list for </span>a</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">    * </span>bin.  Bins </span>are<span class="markdown"> converted to trees when adding </span>an<span class="markdown"> element to </span>a</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">    * </span>bin with at least this many nodes. The value must be greater</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">    * </span>than 2 and </span>should<span class="markdown"> be at least 8 to mesh with assumptions in</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">    * </span>tree removal about conversion back to plain bins upon</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">    * </span>shrinkage.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">    */</span></span></span></span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">int</span> TREEIFY_THRESHOLD = <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">    * </span>The bin count threshold for untreeifying </span>a<span class="markdown"> (split) bin during </span>a</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">    * </span>resize operation. Should be less than TREEIFY_THRESHOLD, and at</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">    * </span>most 6 to mesh with shrinkage detection under removal.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">    */</span></span></span></span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">int</span> UNTREEIFY_THRESHOLD = <span class="number">6</span>;</span><br></pre></td></tr></table></figure>
<p>å½“é“¾è¡¨ç»“æ„é•¿åº¦è¶…è¿‡8 çš„æ—¶å€™ä¼šè½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œå½“å†²çªèŠ‚ç‚¹é•¿åº¦å°äº6çš„æ—¶å€™ï¼Œä¼šé€€åŒ–ä¸ºé“¾è¡¨ã€‚</p>
<p><strong><em>3.hashMapæ‰©å®¹æ˜¯æ€ä¹ˆè¿›è¡Œæ‰©å®¹çš„å‘¢ã€‚</em></strong></p>
<p>æ¥çœ‹çœ‹æ‰©å®¹çš„ä»£ç :</p>
<br/>
<br/>

<details>
<summary><font color='red'>View Code</font></summary>

<figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">public</span> HashMap() &#123;</span><br><span class="line">    <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> HashMap(int initialCapacity, float loadFactor) &#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(<span class="string">"Illegal initial capacity: "</span> +</span><br><span class="line">                                            initialCapacity);</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || <span class="keyword">Float</span>.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(<span class="string">"Illegal load factor: "</span> +</span><br><span class="line">                                            loadFactor);</span><br><span class="line">    <span class="built_in">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="built_in">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">final Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    <span class="comment">// æ—§çš„æ•°ç»„</span></span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">    <span class="comment">// æ—§çš„æ•°ç»„é•¿åº¦ä¸ºæ—§æ•°ç»„å®¹é‡ cap</span></span><br><span class="line">    int oldCap = (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : <span class="type">oldTab</span>.length;</span><br><span class="line">    <span class="comment">// æ—§é˜ˆå€¼ä¸º0 å¦‚æœæ˜¯new HashMap();</span></span><br><span class="line">    int oldThr = threshold;</span><br><span class="line">    <span class="comment">// æ–°å®¹é‡ æ–°é˜ˆå€¼åˆå§‹ä¸º0</span></span><br><span class="line">    int <span class="keyword">new</span><span class="type">Cap</span>, <span class="keyword">new</span><span class="type">Thr</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// æ—§å®¹é‡æœ‰å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœæ—§å®¹é‡å·²ç»å¤§äº1&gt;&gt;30,åˆ™ä¸å†è¿›è¡Œä¹‹åçš„æ‰©å®¹ï¼Œç›´æ¥é˜ˆå€¼è®¾ç½®ä¸ºæœ€å¤§å€¼ï¼Œè¿”å›æ—§æ•°ç»„ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ‰©å®¹ï¼Œæ•°ç»„æ‰©å®¹ä¸ºåŸæ¥2å€ï¼Œé˜ˆå€¼ä¹Ÿå˜æ›´ä¸ºåŸæ¥é˜ˆå€¼çš„ä¸¤å€</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((<span class="keyword">new</span><span class="type">Cap</span> = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                    oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            <span class="keyword">new</span><span class="type">Thr</span> = oldThr &lt;&lt; <span class="number">1</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœå®¹é‡ä¸º0 ï¼Œä½†æ˜¯é˜ˆå€¼æœ‰å€¼ï¼Œç¬¬äºŒç§æ„é€ å‡½æ•°åˆ›å»ºï¼Œåˆ™å®¹é‡è®¾ç½®ä¸ºæ—§çš„é˜ˆå€¼</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) </span><br><span class="line">        <span class="keyword">new</span><span class="type">Cap</span> = oldThr;</span><br><span class="line">    <span class="keyword">else</span> &#123;          </span><br><span class="line">        <span class="comment">//éƒ½æ²¡åˆå§‹åŒ–ï¼Œåˆ™åˆå§‹åŒ– å®¹é‡ä¸º16 é˜ˆå€¼ä¸º16*0.75 12    </span></span><br><span class="line">        <span class="keyword">new</span><span class="type">Cap</span> = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">        <span class="keyword">new</span><span class="type">Thr</span> = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæ–°çš„é˜ˆå€¼æ²¡æœ‰åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯ oldThr&gt;0çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span><span class="type">Thr</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–ä¸º newCap*0.75</span></span><br><span class="line">        float ft = (float)<span class="keyword">new</span><span class="type">Cap</span> * loadFactor;</span><br><span class="line">        <span class="keyword">new</span><span class="type">Thr</span> = (<span class="keyword">new</span><span class="type">Cap</span> &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ?</span><br><span class="line">                    (int)ft : <span class="type">Integer</span>.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¾ç½®é˜ˆå€¼</span></span><br><span class="line">    threshold = <span class="keyword">new</span><span class="type">Thr</span>;</span><br><span class="line">    <span class="comment">// è®¾ç½®æ–°æ•°ç»„</span></span><br><span class="line">    Node&lt;K,V&gt;[] <span class="keyword">new</span><span class="type">Tab</span> = (Node&lt;K,V&gt;[])<span class="keyword">new</span> <span class="type">Node</span>[<span class="keyword">new</span><span class="type">Cap</span>];</span><br><span class="line">    table = <span class="keyword">new</span><span class="type">Tab</span>;</span><br><span class="line">    <span class="comment">//å¦‚æœæ—§æ•°ç»„ä¸ä¸ºnullï¼Œéœ€è¦æ•°æ®è¿ç§»ï¼Œä¸ºç©ºå¯ä»¥ç›´æ¥è¿”å›ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (oldTab != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//éå†æ—§é“¾è¡¨ä¸­æ‰€æœ‰å…ƒç´ è¿›è¡Œæ•°æ®è¿ç§»</span></span><br><span class="line">        <span class="keyword">for</span> (int j = <span class="number">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            <span class="comment">//ä¸ºnullçš„èŠ‚ç‚¹ä¸å¤„ç†</span></span><br><span class="line">            <span class="keyword">if</span> ((e = oldTab[j]) != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//å…ˆæŠŠæ—§èŠ‚ç‚¹ä½ç½®çš„æ•°æ®æ¸…ç©º</span></span><br><span class="line">                oldTab[j] = <span class="literal">null</span>;</span><br><span class="line">                <span class="comment">//å¦‚æœå½“å‰ä½ç½®åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ç›´æ¥è®¾ç½®åˆ°æ–°ä½ç½®å¤„</span></span><br><span class="line">                <span class="keyword">if</span> (e.next == <span class="literal">null</span>)</span><br><span class="line">                   <span class="comment">// æ–°ä½ç½®çš„è®¡ç®—é‡æ–°å–hashä¸å¤§å°å–æ¨¡</span></span><br><span class="line">                    <span class="keyword">new</span><span class="type">Tab</span>[e.hash &amp; (<span class="keyword">new</span><span class="type">Cap</span> - <span class="number">1</span>)] = e;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (e instanceof TreeNode)</span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(<span class="built_in">this</span>, <span class="keyword">new</span><span class="type">Tab</span>, j, oldCap);</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯é“¾è¡¨</span></span><br><span class="line">                <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">                    Node&lt;K,V&gt; loHead = <span class="literal">null</span>, loTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; hiHead = <span class="literal">null</span>, hiTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; next;</span><br><span class="line">                    <span class="comment">//éå†é“¾è¡¨æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line">                    <span class="keyword">do</span> &#123;</span><br><span class="line">                        next = e.next;</span><br><span class="line">                        <span class="comment">//åˆ†ä¸ºä¸¤ç§æƒ…å†µ 1. å½“å‰hashè¶…è¿‡äº†æ—§å®¹é‡ï¼Œ2 å½“å‰å“ˆå¸Œæ²¡æœ‰è¶…è¿‡å°±å®¹é‡</span></span><br><span class="line">                        <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="comment">// æ²¡è¶…è¿‡ åˆ™æ”¾å…¥loTail</span></span><br><span class="line">                            <span class="keyword">if</span> (loTail == <span class="literal">null</span>)</span><br><span class="line">                                loHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                loTail.next = e;</span><br><span class="line">                            loTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="comment">//è¶…è¿‡äº†ï¼Œåˆ™æ”¾å…¥hitail</span></span><br><span class="line">                            <span class="keyword">if</span> (hiTail == <span class="literal">null</span>)</span><br><span class="line">                                hiHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                hiTail.next = e;</span><br><span class="line">                            hiTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">while</span> ((e = next) != <span class="literal">null</span>);</span><br><span class="line">                    <span class="comment">// å¤„ç†loTail  æ”¹é“¾è¡¨ä½ç½®ä¸å˜</span></span><br><span class="line">                    <span class="keyword">if</span> (loTail != <span class="literal">null</span>) &#123;</span><br><span class="line">                        loTail.next = <span class="literal">null</span>;</span><br><span class="line">                        <span class="keyword">new</span><span class="type">Tab</span>[j] = loHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// å¤„ç†hiTail è¯¥é“¾è¡¨ä½ç½®å˜ä¸º åŸoldCap+j</span></span><br><span class="line">                    <span class="keyword">if</span> (hiTail != <span class="literal">null</span>) &#123;</span><br><span class="line">                        hiTail.next = <span class="literal">null</span>;</span><br><span class="line">                        <span class="keyword">new</span><span class="type">Tab</span>[j + oldCap] = hiHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span><span class="type">Tab</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>


<br/>

<p>å¯ä»¥å‘ç°ï¼š</p>
<ol>
<li>hashMapä¸­æ•°ç»„æœ€å¤§å®¹é‡æ˜¯ 1&gt;&gt;30</li>
<li>hashMapçš„tableæ‰©å®¹æ˜¯å·¦ç§»ä¸€ä½ï¼Œæ‰©å®¹ä¸ºåŸæ¥çš„ä¸¤å€å®¹é‡</li>
<li>æ‰©å®¹åçš„å¤„ç†ï¼Œæ‰©å®¹åå…ƒç´ éœ€è¦è¿ç§»ï¼Œç”±äºhashMapçš„å¤„ç†ä¸­ï¼Œæ‰©å®¹ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œåˆå§‹åŒ–çš„æ—¶å€™ä¹Ÿæ˜¯2çš„næ¬¡æ–¹è¿™ç§ï¼Œæ‰€ä»¥æ‰©å®¹åèŠ‚ç‚¹çš„hashå®šä½indexçš„æ—¶å€™åªæœ‰ åŸä½ç½®ï¼Œå’Œj+oldCapè¿™ä¸¤ç§ã€‚</li>
</ol>
<p>è®¾ç½®å®¹é‡çš„åˆå§‹åŒ–: å·§å¦™çš„æ„æ€å°† nä¹‹åçš„ä½æ•°å…¨éƒ¨è®¾ç½®ä¸º1ï¼Œç„¶å+1å–2çš„næ¬¡æ–¹çš„æ•´æ•°ã€‚</p>
<figure class="highlight excel"><table><tr><td class="code"><pre><span class="line">static final <span class="built_in">int</span> tableSizeFor(<span class="built_in">int</span> cap) &#123;</span><br><span class="line">    <span class="built_in">int</span> <span class="built_in">n</span> = cap - <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    return (<span class="built_in">n</span> &lt; <span class="number">0</span>) ? <span class="number">1</span> <span class="symbol">:</span> (<span class="built_in">n</span> &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY <span class="symbol">:</span> <span class="built_in">n</span> + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="../resource/java/hashMapResize.jpg" alt=""></p>
<p><strong><em>ä¸ºä»€ä¹ˆhashMapå†…éƒ¨çš„tableè¦è®¾ç½®ä¸º2çš„næ¬¡æ–¹å€å‘¢ï¼Ÿ</em></strong></p>
<ol>
<li>hashæ˜ å°„åˆ°æ•°ç»„ä¸­éœ€è¦ä»¥å–æ¨¡çš„æ–¹å¼æ¥è¿›è¡Œ</li>
<li>å–æ¨¡çš„æ“ä½œå¯ä»¥æ˜ å°„åˆ° (n-1) &amp; k ä¸Šï¼Œ</li>
<li>å¦‚æœnä¸º2çš„næ¬¡æ–¹ï¼Œé‚£ä¹ˆn-1äºŒè¿›åˆ¶ä¸Šå…¨éƒ¨ä¸º1ï¼Œé‚£ä¹ˆä¸kå–andè¿ç®—çš„æ—¶å€™ï¼Œk&lt;=n-1åˆ™ä¸ºk,k&gt;nçš„æ—¶å€™ é«˜ä½è¢«èˆå¼ƒ</li>
<li>2çš„næ¬¡æ–¹çš„æ—¶å€™ï¼Œæ‰©å®¹åèˆå¼ƒçš„é«˜ä½è¿˜åŸï¼Œé‚£ä¹ˆå…ƒç´ ç§»åŠ¨çš„æ—¶å€™å°±å¯ä»¥è½»æ˜“è®¡ç®—å‡ºæ¥ç§»åŠ¨åçš„ä½ç½®ã€‚</li>
</ol>
<p><strong><em>3.hashMapæ‰©ç¼©å®¹é˜ˆå€¼æ˜¯æ€ä¹ˆç¡®å®šçš„å‘¢</em></strong></p>
<p>ä»ä¸Šè¿°çš„æ‰©å®¹æ“ä½œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ‰©å®¹é˜ˆå€¼å§‹ç»ˆä¸ºå®¹é‡çš„ 0.75 ä¹Ÿå°±æ˜¯è®¾ç½®çš„æ‰©å®¹å› å­ loadFactory</p>
<h3 id="åˆ é™¤-remove"><a href="#åˆ é™¤-remove" class="headerlink" title="åˆ é™¤ remove()"></a>åˆ é™¤ remove()</h3><details>
<summary>View Code</summary>

<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">public V remove(Object key) &#123;</span><br><span class="line">    <span class="keyword">Node</span><span class="title">&lt;K</span>,V&gt; e;</span><br><span class="line">    return (e = removeNode(hash(key), key, null, <span class="literal">false</span>, <span class="literal">true</span>)) == null ?</span><br><span class="line">        null : e.value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">final <span class="keyword">Node</span><span class="title">&lt;K</span>,V&gt; removeNode(int hash, Object key, Object value,</span><br><span class="line">                            boolean matchValue, boolean movable) &#123;</span><br><span class="line">    <span class="keyword">Node</span><span class="title">&lt;K</span>,V&gt;[] tab; <span class="keyword">Node</span><span class="title">&lt;K</span>,V&gt; p; int n, index;</span><br><span class="line">    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (p = tab[index = (n - <span class="number">1</span>) &amp; hash]) != null) &#123;</span><br><span class="line">        <span class="keyword">Node</span><span class="title">&lt;K</span>,V&gt; <span class="keyword">node</span> <span class="title">= null</span>, e; K k; V v;</span><br><span class="line">        //æ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹</span><br><span class="line">        if (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">            <span class="keyword">node</span> <span class="title">= p</span>;</span><br><span class="line">        else if ((e = p.next) != null) &#123;</span><br><span class="line">            if (p instanceof TreeNode)</span><br><span class="line">                <span class="keyword">node</span> <span class="title">= ((TreeNode</span><span class="tag">&lt;K,V&gt;</span>)p).getTreeNode(hash, key);</span><br><span class="line">            else &#123;</span><br><span class="line">                //å¾ªç¯é“¾è¡¨æ‰¾åˆ°éœ€è¦çš„èŠ‚ç‚¹</span><br><span class="line">                do &#123;</span><br><span class="line">                    if (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key ||</span><br><span class="line">                            (key != null &amp;&amp; key.equals(k)))) &#123;</span><br><span class="line">                        <span class="keyword">node</span> <span class="title">= e</span>;</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                    p = e;</span><br><span class="line">                &#125; while ((e = e.next) != null);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        // æ‰¾åˆ°èŠ‚ç‚¹ åˆ é™¤æ‰è¯¥èŠ‚ç‚¹ã€‚</span><br><span class="line">        if (<span class="keyword">node</span> <span class="title">!= null</span> &amp;&amp; (!matchValue || (v = <span class="keyword">node</span>.<span class="title">value</span>) == value ||</span><br><span class="line">                                (value != null &amp;&amp; value.equals(v)))) &#123;</span><br><span class="line">            if (<span class="keyword">node</span> <span class="title">instanceof</span> TreeNode)</span><br><span class="line">                ((TreeNode<span class="tag">&lt;K,V&gt;</span>)<span class="keyword">node</span><span class="title">).removeTreeNode</span>(this, tab, movable);</span><br><span class="line">            else if (<span class="keyword">node</span> <span class="title">== p</span>)</span><br><span class="line">                tab[index] = <span class="keyword">node</span>.<span class="title">next</span>;</span><br><span class="line">            else</span><br><span class="line">                p.next = <span class="keyword">node</span>.<span class="title">next</span>;</span><br><span class="line">            ++modCount;</span><br><span class="line">            --size;</span><br><span class="line">            afterNodeRemoval(<span class="keyword">node</span><span class="title">);</span></span><br><span class="line"><span class="title">            return</span> <span class="keyword">node</span><span class="title">;</span></span><br><span class="line"><span class="title">        &#125;</span></span><br><span class="line"><span class="title">    &#125;</span></span><br><span class="line"><span class="title">    return</span> null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<br/>
<br/>

<p><strong>è¯´æ˜ï¼š</strong><br>åˆ é™¤çš„æ“ä½œæ¯”è¾ƒç®€å•ï¼Œæ‰¾åˆ°èŠ‚ç‚¹ä¹‹åç›´æ¥ç§»é™¤æ‰èŠ‚ç‚¹å°±å¯ä»¥äº†ã€‚</p>
<h1 id="ä½¿ç”¨hashmapéœ€è¦æ³¨æ„"><a href="#ä½¿ç”¨hashmapéœ€è¦æ³¨æ„" class="headerlink" title="ä½¿ç”¨hashmapéœ€è¦æ³¨æ„"></a>ä½¿ç”¨hashmapéœ€è¦æ³¨æ„</h1><ol>
<li>hashMapæ˜¯éçº¿ç¨‹å®‰å…¨çš„</li>
<li>æ‰©å®¹çš„æ“ä½œä¼šéå†æ‰€æœ‰çš„å…ƒç´ ï¼Œå¹¶ä¸”å½“å…ƒç´ &gt;0.75capçš„æ—¶å€™å°±ä¼šè¿›è¡Œæ‰©å®¹ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœèƒ½é¢„ä¼°å®¹é‡ï¼Œæœ€å¥½å¯ä»¥ç›´æ¥è®¾å®šhashMapçš„å®¹é‡ï¼Œé¿å…æ‰©å®¹å¤„ç†</li>
<li>equalsé‡å†™ï¼ŒhashCodeä¸€å®šè¦è¿›è¡Œé‡å†™ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´equalsæ˜¯ç›¸åŒçš„ä½†æ˜¯hashCodeæ²¡æœ‰é‡å†™å¯¼è‡´ä¸åŒ ã€‚å› ä¸ºequalsç›¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªã€‚ä½†æ˜¯hashCodeä¸åŒï¼Œä¼šå¯¼è‡´å…¶è·¯ç”±åˆ°ä¸åŒçš„indexä¸Šï¼Œæ‰€ä»¥å¦‚æœé€šè¿‡aæ˜¯æ‰¾ä¸åˆ°æˆ‘ä»¬è®¤ä¸ºç›¸åŒçš„bçš„ã€‚</li>
</ol>
<h1 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h1><p>æœ¬æ–‡é¦–å…ˆä»‹ç»äº†å“ˆå¸Œè¡¨çš„ç›¸å…³çŸ¥è¯†ï¼Œç„¶åé€šè¿‡hashMapçš„æºç ï¼Œäº†è§£äº†hashMapå†…éƒ¨ç»“æ„å’Œæ‰©å®¹ç­‰ç›¸å…³çŸ¥è¯†ã€‚é€šè¿‡ä¸Šè¿°çš„åˆ†æï¼Œæˆ‘ä»¬å¯¹äºhashMapæœ‰äº†æ›´æ·±åˆ»çš„ç†è§£ã€‚ä½†æ˜¯ä¾æ—§æœ‰å¾ˆå¤šåœ°æ–¹æ²¡æœ‰æ¶‰åŠï¼Œä¾‹å¦‚çº¢é»‘æ ‘å†…éƒ¨çš„æ“ä½œï¼Œåºåˆ—åŒ–ç­‰ç­‰æ“ä½œã€‚</p>
]]></content>
      <categories>
        <category>java</category>
        <category>javaé›†åˆ</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>é›†åˆ</tag>
        <tag>HashMap</tag>
      </tags>
  </entry>
  <entry>
    <title>LinedListæºç åˆ†æ</title>
    <url>/post/2528e072.html</url>
    <content><![CDATA[<h1 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h1><p>å¦‚æœè¯´ArrayListæ˜¯éšæœºè®¿é—®çš„å…¸å‹ç»“æ„ï¼Œé‚£LinkedListå°±æ˜¯å…¸å‹çš„é¡ºåºè®¿é—®ç»“æ„ã€‚</p>
<p>åœ¨ArrayListçš„æºç åˆ†æä¸­æˆ‘ä»¬æåˆ°ï¼ŒArrayListçš„å‡ºç°æ˜¯ä¸ºäº†å¼¥è¡¥æ•°ç»„å¤§å°éœ€è¦è‡ªæˆ‘ç®¡ç†ï¼Œé¿å…æ•°ç»„è¶Šç•Œç­‰é—®é¢˜ï¼Œæä¾›äº†è‡ªåŠ¨æ‰©å®¹çš„ç‰¹æ€§ï¼Œä»¥åŠæ•°ç»„æ’å…¥å…ƒç´ åˆ é™¤å…ƒç´ çš„å…ƒç´ ç§»åŠ¨ç®¡ç†ç­‰ç­‰ã€‚</p>
<p>é‚£ä¹ˆLinkedListç›¸æ¯”äºArrayListåˆå…·æœ‰å“ªäº›ä¼˜ç‚¹æˆ–è€…ç¼ºç‚¹å‘¢ï¼Ÿè®©æˆ‘ä»¬å…ˆçœ‹çœ‹LinkedListçš„æ•°æ®ç»“æ„åœ¨æ¥å›ç­”è¿™ä¸ªé—®é¢˜ã€‚ </p>
<h1 id="LinkedListæºç è§£æ"><a href="#LinkedListæºç è§£æ" class="headerlink" title="LinkedListæºç è§£æ"></a>LinkedListæºç è§£æ</h1><h2 id="æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€"><a href="#æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€" class="headerlink" title="æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€"></a>æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€</h2><details>

<summary>view code</summary>

<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">//é¦–èŠ‚ç‚¹</span><br><span class="line">transient <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; first;</span><br><span class="line">//å°¾èŠ‚ç‚¹</span><br><span class="line">transient <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; last;</span><br><span class="line"></span><br><span class="line">private static class <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; &#123;</span><br><span class="line">   //å…ƒç´ å€¼</span><br><span class="line">    E item; </span><br><span class="line">    //ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">    <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; next;</span><br><span class="line">    //å‰ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">    <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; prev;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">Node</span><span class="title">(Node</span><span class="tag">&lt;E&gt;</span> prev, E element, <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; next) &#123;</span><br><span class="line">        this.item = element;</span><br><span class="line">        this.next = next;</span><br><span class="line">        this.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>


<p>é€šè¿‡ä¸Šè¿°æºç å¯ä»¥å‘ç°ï¼ŒLinkedListå†…éƒ¨çš„ç»“æ„å°±å¦‚åŒä¸‹å›¾æ‰€ç¤ºçš„åŒå‘é“¾è¡¨</p>
<p><img src="../resource/java/LinkedList%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.jpg" alt=""></p>
<p>å¦‚æœæ‰€ç¤ºï¼Œåœ¨LinkedListçš„å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘åˆ—è¡¨ï¼Œå¹¶ä¸”åˆ†åˆ«ä½¿ç”¨firstå’ŒlastæŒ‡é’ˆæŒ‡å‘äº†åŒå‘é“¾è¡¨çš„å¤´éƒ¨å’Œå°¾éƒ¨ï¼Œå¦‚æ­¤ï¼Œä¾¿å¯ä»¥ä»å¤´å¼€å§‹ï¼Œæˆ–è€…ä»å°¾éƒ¨å¼€å§‹è¿›è¡ŒæŸ¥æ‰¾ã€‚ </p>
<p><strong><em>LinkedListçš„ä¼˜ç¼ºç‚¹:</em></strong></p>
<p>æ—¢ç„¶linkedListæ˜¯ä»¥é“¾è¡¨ä¸ºåŸºç¡€ç»“æ„çš„ï¼Œé‚£è¾¹é“¾è¡¨çš„ä¼˜ç¼ºç‚¹LinkedListä¹ŸåŸºæœ¬å…·å¤‡ã€‚<br>ä¼˜ç‚¹ï¼š </p>
<ol>
<li>æ’å…¥åˆ é™¤æ“ä½œä»…ä»…éœ€è¦ä¿®æ”¹å¯¹åº”æŒ‡é’ˆï¼Œä¸åœ¨éœ€è¦ç§»åŠ¨å…ƒç´ æ“ä½œã€‚ </li>
<li>å¤§å°å¯æ— é™æ‰©å±•å’Œç¼©å‡ï¼Œæ— éœ€è¿›è¡Œæ‰©å®¹çš„ç›¸å…³æ“ä½œã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>æ— æ³•è¿›è¡Œéšæœºè®¿é—®ï¼Œéœ€è¦è®¿é—®æŸä¸ªä½ç½®çš„èŠ‚ç‚¹ï¼Œåªèƒ½ä»å¤´å¼€å§‹éå†ã€‚</li>
</ol>
<p>é“¾è¡¨çš„åŸºç¡€æ“ä½œå…¶å®ç›¸å½“éº»çƒ¦ï¼Œéœ€è¦æ’å…¥ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹å‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆåä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆï¼Œé‚£ä¹ˆLinkedListä½œä¸ºé“¾è¡¨çš„å°è£…ï¼Œåˆæä¾›äº†å“ªäº›åŸºç¡€å‡½æ•°å¯ä»¥ä½¿ç”¨å‘¢ï¼Ÿ</p>
<h2 id="LinkedListé‡è¦å‡½æ•°"><a href="#LinkedListé‡è¦å‡½æ•°" class="headerlink" title="LinkedListé‡è¦å‡½æ•°"></a>LinkedListé‡è¦å‡½æ•°</h2><h3 id="link-amp-amp-unLink-æ–¹æ³•"><a href="#link-amp-amp-unLink-æ–¹æ³•" class="headerlink" title="link* &amp;&amp; unLink* æ–¹æ³•"></a>link* &amp;&amp; unLink* æ–¹æ³•</h3><h4 id="linkFirst-amp-amp-unlinkFirst"><a href="#linkFirst-amp-amp-unlinkFirst" class="headerlink" title="linkFirst &amp;&amp; unlinkFirst"></a>linkFirst &amp;&amp; unlinkFirst</h4><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®eä¸ºç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> linkFirst(E e) &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(<span class="keyword">null</span>, e, f);</span><br><span class="line">    <span class="comment">//è®¾ç½®é¦–ä¸ªèŠ‚ç‚¹ä¸ºe</span></span><br><span class="line">    first = newNode;</span><br><span class="line">    <span class="comment">//ä¹‹å‰çš„é¦–èŠ‚ç‚¹ä¸ºnullï¼Œè¡¨ç¤ºæ”¹é“¾è¡¨ä¹‹å‰æœªnull</span></span><br><span class="line">    <span class="keyword">if</span> (f == <span class="keyword">null</span>)</span><br><span class="line">        <span class="comment">//è®¾ç½®lastèŠ‚ç‚¹ä¹Ÿä¸ºe</span></span><br><span class="line">        last = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment">//å¦è€…è®¾ç½®ä¹‹å‰çš„èŠ‚ç‚¹çš„å‰é©±ä¸ºe</span></span><br><span class="line">        f.prev = newNode;</span><br><span class="line">    <span class="keyword">size</span>++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤æŒ‡å®šèŠ‚ç‚¹å‰çš„æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">private</span> E unlinkFirst(Node&lt;E&gt; f) &#123;</span><br><span class="line">    <span class="comment">// assert f == first &amp;&amp; f != null;</span></span><br><span class="line">    <span class="keyword">final</span> E element = f.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; <span class="keyword">next</span> = f.<span class="keyword">next</span>;</span><br><span class="line">    f.item = <span class="keyword">null</span>;</span><br><span class="line">    f.<span class="keyword">next</span> = <span class="keyword">null</span>; <span class="comment">// help GC</span></span><br><span class="line">    <span class="comment">//æŒ‡å®šèŠ‚ç‚¹åçš„èŠ‚ç‚¹è®¾ç½®ä¸ºé¦–èŠ‚ç‚¹</span></span><br><span class="line">    first = <span class="keyword">next</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">next</span> == <span class="keyword">null</span>)</span><br><span class="line">        last = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">       <span class="comment">//æŒ‡å®šèŠ‚ç‚¹åçš„èŠ‚ç‚¹å‰é©±èŠ‚ç‚¹è®¾ç½®ä¸ºnull</span></span><br><span class="line">        <span class="keyword">next</span>.prev = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">size</span>--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>è¯´æ˜ï¼š</strong><br>ä¸Šé¢ä¸¤ä¸ªå‡½æ•°ï¼Œä¸ºå…¶ä»–å‡½æ•°ä¾‹å¦‚ addFirstç­‰å‡½æ•°æä¾›äº†åŸºç¡€æ“ä½œï¼Œä¸»è¦ä½œç”¨æ˜¯é“¾è¡¨å¤´éƒ¨æ’å…¥å…ƒç´ ï¼Œå’Œé“¾è¡¨å¤´éƒ¨åˆ é™¤å…ƒç´ ã€‚</p>
<p>linkFirst:</p>
<p><img src="../resource/java/linkFirst.jpg" alt=""></p>
<p>unlinkFirst:<br><img src="../resource/java/unlinkFirst.jpg" alt=""></p>
<h4 id="å‰©ä½™link-amp-amp-unlink-å‡½æ•°"><a href="#å‰©ä½™link-amp-amp-unlink-å‡½æ•°" class="headerlink" title="å‰©ä½™link* &amp;&amp; unlink* å‡½æ•°"></a>å‰©ä½™link* &amp;&amp; unlink* å‡½æ•°</h4><details>
<summary>view code</summary>

<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®eä¸ºå°¾èŠ‚ç‚¹ï¼Œä¸ºaddæä¾›æœåŠ¡</span></span><br><span class="line"><span class="keyword">void</span> linkLast(E e) &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(l, e, <span class="keyword">null</span>);</span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="keyword">null</span>)</span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        l.<span class="keyword">next</span> = newNode;</span><br><span class="line">    <span class="keyword">size</span>++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åœ¨ç‰¹å®šèŠ‚ç‚¹å‰æ’å…¥èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">void</span> linkBefore(E e, Node&lt;E&gt; succ) &#123;</span><br><span class="line">    <span class="comment">// assert succ != null;</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; pred = succ.prev;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(pred, e, succ);</span><br><span class="line">    succ.prev = newNode;</span><br><span class="line">    <span class="keyword">if</span> (pred == <span class="keyword">null</span>)</span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        pred.<span class="keyword">next</span> = newNode;</span><br><span class="line">    <span class="keyword">size</span>++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ é™¤èŠ‚ç‚¹åæ‰€æœ‰èŠ‚ç‚¹ ç”¨äºåˆ é™¤å°¾èŠ‚ç‚¹ç­‰</span></span><br><span class="line"><span class="keyword">private</span> E unlinkLast(Node&lt;E&gt; l) &#123;</span><br><span class="line">    <span class="comment">// assert l == last &amp;&amp; l != null;</span></span><br><span class="line">    <span class="keyword">final</span> E element = l.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = l.prev;</span><br><span class="line">    l.item = <span class="keyword">null</span>;</span><br><span class="line">    l.prev = <span class="keyword">null</span>; <span class="comment">// help GC</span></span><br><span class="line">    last = prev;</span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="keyword">null</span>)</span><br><span class="line">        first = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        prev.<span class="keyword">next</span> = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">size</span>--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ç‰¹å®šèŠ‚ç‚¹</span></span><br><span class="line">E unlink(Node&lt;E&gt; x) &#123;</span><br><span class="line">    <span class="comment">// assert x != null;</span></span><br><span class="line">    <span class="keyword">final</span> E element = x.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; <span class="keyword">next</span> = x.<span class="keyword">next</span>;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev;</span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">        first = <span class="keyword">next</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        prev.<span class="keyword">next</span> = <span class="keyword">next</span>;</span><br><span class="line">        x.prev = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">next</span> == <span class="keyword">null</span>) &#123;</span><br><span class="line">        last = prev;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">next</span>.prev = prev;</span><br><span class="line">        x.<span class="keyword">next</span> = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    x.item = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">size</span>--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>


<p><strong>è¯´æ˜ï¼š</strong><br>ä¸Šè¿°æ‰€æœ‰çš„linkï¼Œunlinkæ“ä½œï¼ŒåŒ…å«äº†å¯¹äºä¸€ä¸ªé“¾è¡¨çš„æœ€åŸºæœ¬æ’å…¥èŠ‚ç‚¹å’Œåˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œæä¾›äº†å¯¹äºé¦–ã€å°¾ã€ç‰¹å®šèŠ‚ç‚¹çš„æ’å…¥åˆ é™¤æ“ä½œçš„å°è£…ï¼Œä»¥å…±ç”¨å¹¶ä¸”ç®€åŒ–å…¶ä»–apiçš„å¤æ‚åº¦ã€‚</p>
<h3 id="node"><a href="#node" class="headerlink" title="node"></a>node</h3><figure class="highlight sas"><table><tr><td class="code"><pre><span class="line">Node&lt;E&gt; node(int <span class="meta">index</span>) &#123;</span><br><span class="line">  //ä¼˜åŒ–æ–¹æ¡ˆï¼Œå¦‚æœ<span class="meta">index</span>åœ¨å‰åŠéƒ¨åˆ†ä»å‰å¼€å§‹æœç´¢ï¼Œå¦åˆ™ä»å°¾èŠ‚ç‚¹å¼€å§‹æœç´¢ï¼Œå±äºç©ºé—´æ¢æ—¶é—´çš„æ€è·¯</span><br><span class="line">  <span class="meta">if</span> (<span class="meta">index</span> &lt; (size &gt;&gt; 1)) &#123;</span><br><span class="line">      Node&lt;E&gt; <span class="meta">x</span> = first;</span><br><span class="line">      for (int i = 0; i &lt; <span class="meta">index</span>; i++)</span><br><span class="line">          <span class="meta">x</span> = <span class="meta">x</span>.next;</span><br><span class="line">      <span class="meta">return</span> <span class="meta">x</span>;</span><br><span class="line">  &#125; <span class="meta">else</span> &#123;</span><br><span class="line">    //ä»å°¾èŠ‚ç‚¹å¼€å§‹æœç´¢</span><br><span class="line">      Node&lt;E&gt; <span class="meta">x</span> = last;</span><br><span class="line">      for (int i = size - 1; i &gt; <span class="meta">index</span>; i--)</span><br><span class="line">          <span class="meta">x</span> = <span class="meta">x</span>.prev;</span><br><span class="line">      <span class="meta">return</span> <span class="meta">x</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong><br>nodeå‡½æ•°ï¼Œæä¾›äº†ä¸€ä¸ªæœç´¢ç‰¹å®šä½ç½®èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸ºadd(1,e)æä¾›äº†åŸºç¡€ï¼Œæ’å…¥ç‰¹å®šä½ç½®æŸä¸ªç‰¹å®šå…ƒç´ æä¾›äº†åŸºç¡€æ–¹æ³•</p>
<h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">public boolean add(E e) &#123;</span><br><span class="line">  link<span class="constructor">Last(<span class="params">e</span>)</span>;</span><br><span class="line">  return <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">public void add<span class="constructor">First(E <span class="params">e</span>)</span> &#123;</span><br><span class="line">  link<span class="constructor">First(<span class="params">e</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line">public void add<span class="constructor">Last(E <span class="params">e</span>)</span> &#123;</span><br><span class="line">  link<span class="constructor">Last(<span class="params">e</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line">public void add(<span class="built_in">int</span> index, E element) &#123;</span><br><span class="line">  <span class="keyword">if</span> (index<span class="operator"> == </span>size)</span><br><span class="line">      link<span class="constructor">Last(<span class="params">element</span>)</span>;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">      link<span class="constructor">Before(<span class="params">element</span>, <span class="params">node</span>(<span class="params">index</span>)</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¯´æ˜ï¼š</strong> link* å‡½æ•°ä¸Šè¿°å·²ç»æè¿°è¿‡äº†ï¼Œaddå‡½æ•°å‡æ˜¯è°ƒç”¨link*è¿˜æ˜¯æ¥å®ç°æ’å…¥å…ƒç´ çš„æ“ä½œã€‚</p>
<h3 id="addAll"><a href="#addAll" class="headerlink" title="addAll()"></a>addAll()</h3><details>
<summary>view code</summary>

<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>Inserts all of </span>the<span class="markdown"> elements in </span>the<span class="markdown"> specified collection into this</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>list, starting at </span>the<span class="markdown"> specified position.  Shifts </span>the<span class="markdown"> element</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>currently at that position (if any) and any subsequent elements to</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span></span>the<span class="markdown"> right (increases their indices).  The new elements </span>will<span class="markdown"> appear</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>in </span>the<span class="markdown"> list in </span>the<span class="markdown"> order that </span>they<span class="markdown"> </span>are<span class="markdown"> returned by </span>the</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>specified collection's iterator.</span></span></span><br><span class="line"><span class="comment"><span class="markdown">*</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@param index index at which to insert </span>the<span class="markdown"> first element</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">*              </span>from </span>the<span class="markdown"> specified collection</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@param c collection containing elements to be added to this list</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@return &#123;@code true&#125; if this list changed as </span>a<span class="markdown"> result of </span>the<span class="markdown"> call</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@throws IndexOutOfBoundsException &#123;@inheritDoc&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@throws NullPointerException if </span>the<span class="markdown"> specified collection is null</span></span></span><br><span class="line"><span class="comment"><span class="markdown">*/</span></span></span><br><span class="line">public boolean addAll(<span class="built_in">int</span> index, Collection&lt;? <span class="keyword">extends</span> E&gt; c) &#123;</span><br><span class="line">    checkPositionIndex(index);</span><br><span class="line">    <span class="comment">//å°†é›†åˆè½¬åŒ–ä¸ºæ•°ç»„</span></span><br><span class="line">    <span class="built_in">Object</span>[] a = c.toArray();</span><br><span class="line">    <span class="built_in">int</span> numNew = a.length;</span><br><span class="line">    <span class="keyword">if</span> (numNew == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°indexçš„èŠ‚ç‚¹</span></span><br><span class="line">    Node&lt;E&gt; pred, succ;</span><br><span class="line">    <span class="keyword">if</span> (index == size) &#123;</span><br><span class="line">        succ = <span class="keyword">null</span>;</span><br><span class="line">        pred = last;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        succ = node(index);</span><br><span class="line">        pred = succ.prev;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//éå†æ•°ç»„ å°†é›†åˆæ’å…¥åˆ°indexèŠ‚ç‚¹åé¢</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">Object</span> o : a) &#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>) E e = (E) o;</span><br><span class="line">        Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(pred, e, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (pred == <span class="keyword">null</span>)</span><br><span class="line">            first = newNode;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            pred.next = newNode;</span><br><span class="line">        pred = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¾ç½®å°¾èŠ‚ç‚¹ æˆ–è€…åé¢çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (succ == <span class="keyword">null</span>) &#123;</span><br><span class="line">        last = pred;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pred.next = succ;</span><br><span class="line">        succ.prev = pred;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    size += numNew;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<p><strong>è¯´æ˜ï¼š</strong> </p>
<p>addAll()å‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„ç‚¹ï¼Œå°±æ˜¯ <strong>Object[] a = c.toArray();</strong> ä¸ºä»€ä¹ˆæ’å…¥é›†åˆå…ƒç´ çš„æ—¶å€™éœ€è¦å…ˆæŠŠé›†åˆè½¬åŒ–ä¸ºæ•°ç»„å‘¢ï¼Ÿ</p>
<p>æŸ¥çœ‹addAllçš„æ³¨é‡Šè§£é‡Šï¼Œå‘ç°ä¹Ÿå¹¶æ²¡æœ‰è¯´æ˜è¿™ä¸ªäº‹æƒ…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å»çœ‹ä¸‹toArray()æ–¹æ³•æ˜¯å¦ä¼šæœ‰è¿™ä¸ªè§£é‡Šå‘¢ï¼Ÿ</p>
<figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line">  * Returns an<span class="built_in"> array </span>containing all of the elements in this collection.</span><br><span class="line">  * If this collection makes any guarantees as to what order its elements</span><br><span class="line">  * are returned by its iterator, this method must<span class="built_in"> return </span>the elements in</span><br><span class="line">  * the same order.</span><br><span class="line">  *</span><br><span class="line">  * &lt;p&gt;The returned<span class="built_in"> array </span>will be <span class="string">"safe"</span> in that no references to it are</span><br><span class="line">  * maintained by this collection.  (In other words, this method must</span><br><span class="line">  * allocate a<span class="built_in"> new </span>array even<span class="built_in"> if </span>this collection is backed by an array).</span><br><span class="line">  * The caller is thus free to modify the returned array.</span><br><span class="line">  *</span><br><span class="line">  * &lt;p&gt;This method acts as<span class="keyword"> bridge</span> between<span class="built_in"> array-based </span>and collection-based</span><br><span class="line">  * APIs.</span><br><span class="line">  *</span><br><span class="line">  * @return an<span class="built_in"> array </span>containing all of the elements in this collection</span><br><span class="line">  */</span><br><span class="line">Object[] toArray();</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®æ³¨é‡Šçš„è§£é‡Šæˆ‘ä»¬å¯ä»¥å‘ç°ï¼š</p>
<p><strong><em>Collection.toArray()æ–¹æ³•çš„å®šä¹‰ä¸Šï¼Œæ˜¯æä¾›ä¸€ä¸ªå®‰å…¨çš„æ–¹æ³•ï¼Œæ˜¯çš„è·å–åˆ°çš„æ•°ç»„å¯ä»¥è¢«è‡ªç”±çš„ä¿®æ”¹æˆ–è€…æ˜¯åˆ é™¤å…ƒç´ ,è€Œä¸ä¼šå½±å“åˆ°åŸæœ¬çš„é›†åˆ</em></strong></p>
<p><strong><em>æ³¨æ„ï¼šå¯¹äºCollection.toArray()è¿›è¡Œå®ç°çš„æ—¶å€™ï¼Œè¯·åŠ¡å¿…éµå¾ªæ”¹åŸåˆ™</em></strong></p>
<p>é‚£ä¹ˆæˆ‘ä»¬åœ¨æ¥çœ‹ä¸€ä¸‹LinkedListçš„toArray()æ–¹æ³•:</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">Object</span>[] toArray() &#123;</span><br><span class="line">  <span class="keyword">Object</span>[] result = <span class="keyword">new</span> <span class="keyword">Object</span>[<span class="built_in">size</span>];</span><br><span class="line">  <span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next)</span><br><span class="line">      result[i++] = x.item;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒæ ·çš„æˆ‘ä»¬å‘ç°ä¸€ä¸ªäº‹æƒ…ï¼Œå°±æ˜¯å¦‚æœä½ å¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œäº†å¢åŠ åˆ é™¤ä¿®æ”¹ï¼Œæ˜¯ä¸ä¼šååº”åˆ°é›†åˆçš„ã€‚ä½†æ˜¯è¿™ä¸ªsafeæ˜¯ä¸ä¼šåŒ…å«å¯¹è±¡çš„safeï¼Œä¹Ÿå°±æ˜¯ <strong><em>é›†åˆçš„å¯¹è±¡å’Œæ•°ç»„çš„å¯¹è±¡è¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡ å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†æ•°ç»„ä¸­å¯¹è±¡çš„å±æ€§ï¼Œé‚£ä¹ˆåŸé›†åˆä¸­ä¹Ÿä¼šæœ‰ä½“ç°</em></strong></p>
<h3 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h3><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function">E <span class="title">removeFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">  <span class="keyword">if</span> (f == <span class="keyword">null</span>)</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">  <span class="function"><span class="keyword">return</span> <span class="title">unlinkFirst</span><span class="params">(f)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="function">E <span class="title">removeLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">  <span class="keyword">if</span> (l == <span class="keyword">null</span>)</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">  <span class="function"><span class="keyword">return</span> <span class="title">unlinkLast</span><span class="params">(l)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="function">E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">  checkElementIndex(index);</span><br><span class="line">  <span class="keyword">return</span> unlink(node(index));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¯´æ˜ï¼š</strong> ä¸addç±»ä¼¼ï¼Œremoveä¹Ÿæ˜¯åŸºäºlink* å‡½æ•°å’Œnodeå‡½æ•°è¿›è¡Œçš„å°è£…ã€‚<br>å¹¶ä¸”ä»ä¸Šè¿°æ“ä½œä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåˆ é™¤ä¸€ä¸ªç‰¹å®šä½ç½®çš„èŠ‚ç‚¹ï¼Œå¯¹äºLinkedListæ¥è¯´æ—¶é—´å¤æ‚åº¦ä¸ºO(n).</p>
<h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="built_in">public</span> E <span class="keyword">get</span>(<span class="type">int</span> <span class="keyword">index</span>) &#123;</span><br><span class="line">  checkElementIndex(<span class="keyword">index</span>);</span><br><span class="line">  <span class="keyword">return</span> node(<span class="keyword">index</span>).item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p>é€šè¿‡ä¸Šé¢çš„å¢åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å¯¹äºLinkedListæˆ–è€…è¯´å¯¹äºé“¾è¡¨æ¥è¯´ï¼ŒåŸºç¡€æ“ä½œéƒ½æ˜¯åŸºäºlink*  unlink*  node()å‡½æ•°è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯èŠ‚ç‚¹å‰åæ·»åŠ å…ƒç´ ï¼ŒèŠ‚ç‚¹å‰ååˆ é™¤å…ƒç´ çš„æŒ‡é’ˆæ“ä½œï¼Œä»¥åŠæŸ¥æ‰¾æŒ‡å®šä½ç½®å…ƒç´ è¿™ä¸ªä¸‰ä¸ªåŸºæœ¬æ“ä½œè¿›è¡Œçš„ã€‚</p>
<h1 id="é¢å¤–ç‰¹æ€§ï¼Œé¢˜å¤–è¯"><a href="#é¢å¤–ç‰¹æ€§ï¼Œé¢˜å¤–è¯" class="headerlink" title="é¢å¤–ç‰¹æ€§ï¼Œé¢˜å¤–è¯"></a>é¢å¤–ç‰¹æ€§ï¼Œé¢˜å¤–è¯</h1><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function">E <span class="title">poll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">return</span> (f == <span class="keyword">null</span>) ? <span class="keyword">null</span> : unlinkFirst(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    addFirst(e);</span><br><span class="line">&#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="function">E <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">return</span> <span class="title">removeFirst</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong></p>
<p>ç”±äºLinkedListé‡‡ç”¨çš„åŒé“¾è¡¨çš„å®ç°æ–¹å¼ï¼Œadd å’Œ remove å¤´å°¾èŠ‚ç‚¹éå¸¸çš„æ–¹ä¾¿ï¼Œå¹¶ä¸”è€—æ—¶ä¸ºO(1)ï¼Œæ—¶é—´å¤æ‚åº¦æä½ï¼Œæ•…è€ŒLinkedListåŒæ ·è¿˜å¯ä»¥ä½œä¸ºæ ˆæˆ–è€…é˜Ÿåˆ—æ¥ä½¿ç”¨ï¼Œ pop push æ“ä½œæ„æˆäº†å…ˆè¿›åå‡ºçš„æ ˆç»“æ„ï¼Œ poll add å˜æˆäº†å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ç»“æ„ã€‚</p>
]]></content>
      <categories>
        <category>java</category>
        <category>javaé›†åˆ</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>é›†åˆ</tag>
        <tag>LinkedList</tag>
      </tags>
  </entry>
  <entry>
    <title>ArrayListæºç åˆ†æ</title>
    <url>/post/3fb8877a.html</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><!-- ä¸ºä»€ä¹ˆéœ€è¦ArrayListï¼ŒArrayList è§£å†³äº†ä»€ä¹ˆé—®é¢˜? -->

<p>åœ¨è¿›å…¥æºç åˆ†æå‰ï¼Œå…ˆè®©æˆ‘ä»¬æƒ³ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p><em>ArrayListä½œä¸ºä¸€ä¸ªéšæœºè®¿é—®(RandomAccess)çš„ç±»ï¼Œå…¶åŸºæœ¬æ“ä½œå‡ ä¹ä¸æ•°ç»„ä¸€è‡´ï¼Œä½†æ˜¯å¯¹äºä»»ä½•ä¸€é—¨è®¡ç®—æœºè¯­è¨€æ¥è¯´ï¼Œæ•°ç»„åŸºæœ¬éƒ½æ˜¯å†…ç½®çš„åŸºç¡€ç»“æ„ï¼Œé‚£ä¹ˆæ—¢ç„¶æœ‰äº†æ•°ç»„ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ArrayListè¿™æ ·çš„æ•°æ®ç»“æ„å‘¢ï¼Ÿ</em></p>
<!-- å› ä¸ºè‡ªåŠ¨æ‰©å®¹ -->

<p>ä»ArrayListçš„æ³¨é‡Šçš„ç¬¬ä¸€å¥è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰¾åˆ°ä¸Šé¢é—®é¢˜çš„ç­”æ¡ˆï¼Œé‚£å°±æ˜¯ </p>
<blockquote>
<p>Resizable-array implementation of the List interface</p>
</blockquote>
<p><strong><em>Resizable-array å¤§å°å¯è°ƒæ•´ å³è‡ªåŠ¨æ‰©å®¹</em></strong> </p>
<p>æ•°ç»„ä½œä¸ºä¸€ä¸ªåŸºæœ¬çš„ç»“æ„ï¼Œå…¶æ“ä½œæ˜¯éå¸¸ç®€å•çš„ï¼Œä½†æ˜¯å…¶ç¼ºç‚¹ä¹Ÿæ˜¯éå¸¸æ˜æ˜¾çš„ï¼Œé‚£å°±æ˜¯æ•°ç»„çš„å¤§å°æ˜¯æœ€å¼€å§‹å°±ç”³è¯·å¥½çš„ï¼Œä¸€æ—¦æ•°æ®æ•°ç›®è¶…è¿‡äº†æ•°ç»„å¤§å°ï¼Œå°±ä¼šæœ‰æ•°ç»„è¶Šç•Œé£é™©ã€‚ é‚£ä¹ˆå¯¹äºä¸€äº›æˆ‘ä»¬æ— æ³•æå‰çŸ¥é“æ•°æ®ä¸ªæ•°çš„åœºæ™¯ï¼Œæ¯”å¦‚ç”¨æˆ·è´­ç‰©è½¦çš„åœºæ™¯ï¼Œç”¨æˆ·éšæ—¶å¯ä»¥å¢åŠ å•†å“.</p>
<p>è€ŒArrayListçš„è‡ªåŠ¨æ‰©å®¹æ°å¥½å¼¥è¡¥è¯¥ç¼ºé™·ï¼Œå¼€å‘è€…æ— éœ€è€ƒè™‘æ•°ç»„è¶Šç•Œçš„é£é™©ï¼Œå¢åŠ å•†å“çš„æ—¶å€™ç›´æ¥addå³å¯ï¼Œç”±ArrayListæ¥è¿›è¡ŒåŠ¨æ€è°ƒæ•´ã€‚</p>
<p>é‚£ä¹ˆArrayListåˆæ˜¯å¦‚ä½•è¿›è¡Œresizableå‘¢ï¼Ÿè¿™å°±éœ€è¦è¿›å…¥æºç çš„ä¸–ç•Œäº†</p>
<h1 id="ArrayList-æºç åˆ†æ"><a href="#ArrayList-æºç åˆ†æ" class="headerlink" title="ArrayList æºç åˆ†æ"></a>ArrayList æºç åˆ†æ</h1><h2 id="æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€"><a href="#æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€" class="headerlink" title="æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€"></a>æ•°æ®ç»“æ„æ˜¯ä¸€åˆ‡çš„åŸºç¡€</h2><figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * The<span class="built_in"> array </span>buffer into which the elements of the ArrayList are stored.</span><br><span class="line"> * The capacity of the ArrayList is the length of this<span class="built_in"> array </span>buffer. Any</span><br><span class="line"> * empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><br><span class="line"> * will be expanded to DEFAULT_CAPACITY when the first element is added.</span><br><span class="line"> */</span><br><span class="line">transient Object[] elementData;</span><br></pre></td></tr></table></figure>

<p><img src="../resource/java/%E6%95%B0%E7%BB%84.jpg" alt=""></p>
<p>ArrayListçš„å†…éƒ¨ä¾æ—§é‡‡ç”¨çš„æ•°ç»„(elementDataå­˜å‚¨å…ƒç´ )çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”ç±»å‹æ˜¯Objectï¼Œç”±äºjavaä¸­æ‰€æœ‰ç±»éƒ½ç»§æ‰¿è‡ªObjectï¼Œæ•…è€ŒArrayListå®è´¨å¯ä»¥å­˜å‚¨æ‰€æœ‰ç±»å‹ã€‚</p>
<h2 id="ä»€ä¹ˆæ—¶å€™æ‰©å®¹ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™æ‰©å®¹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™æ‰©å®¹ï¼Ÿ"></a>ä»€ä¹ˆæ—¶å€™æ‰©å®¹ï¼Ÿ</h2><p>å¯¹äºRandomAccess éšæœºè®¿é—®çš„é›†åˆç»“æ„æ¥è¯´ï¼Œæœ€ç»ˆè¦çš„æ¥å£æ— ç–‘æ˜¯ getï¼Œsetï¼Œadd æ–¹æ³•äº†ã€‚</p>
<p>é¦–å…ˆæ¥çœ‹getæ–¹æ³•(å¦‚ä¸‹code)ï¼šå¯¹äºget/setæ¥è¯´ï¼Œæ˜¯æ— éœ€å…³å¿ƒæ‰©å®¹é—®é¢˜çš„ï¼Œåªè¦æ²¡æœ‰è¶Šç•Œï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®å°±è‚¯å®šå­˜åœ¨ï¼Œæ•…è€Œä»…ä»…æ£€æŸ¥äº†è¶Šç•Œé—®é¢˜å°±ç›´æ¥è¿”å›äº†æ•°ç»„ä¸­çš„Indexä½ç½®çš„å…ƒç´ ï¼ˆæˆ–è€…è®¾ç½®æ•°ç»„indexä½ç½®çš„å…ƒç´ ï¼‰</p>
<details>
<summary>View Code</summary>

<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="built_in">public</span> E <span class="keyword">get</span>(<span class="type">int</span> <span class="keyword">index</span>) &#123;</span><br><span class="line">     range<span class="keyword">Check</span>(<span class="keyword">index</span>);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> elementData(<span class="keyword">index</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> private <span class="type">void</span> range<span class="keyword">Check</span>(<span class="type">int</span> <span class="keyword">index</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">index</span> &gt;= size)</span><br><span class="line">         throw <span class="built_in">new</span> IndexOutOfBoundsException(outOfBoundsMsg(<span class="keyword">index</span>));</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">public</span> E <span class="keyword">set</span>(<span class="type">int</span> <span class="keyword">index</span>, E element) &#123;</span><br><span class="line">     range<span class="keyword">Check</span>(<span class="keyword">index</span>);</span><br><span class="line"></span><br><span class="line">     E oldValue = elementData(<span class="keyword">index</span>);</span><br><span class="line">     elementData[<span class="keyword">index</span>] = element;</span><br><span class="line">     <span class="keyword">return</span> oldValue;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

</details>

<br/>
<br/>

<p><strong><em>addæ–¹æ³•ï¼š</em></strong></p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç¡®ä¿å®¹é‡è¶³å¤Ÿ</span></span><br><span class="line">    ensureCapacityInternal(<span class="built_in">size</span> + <span class="number">1</span>); </span><br><span class="line">    elementData[<span class="built_in">size</span>++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“å‰æ•°ç©ºæ•°ç»„ï¼Œåˆ™å–size+1å’Œé»˜è®¤å€¼çš„æœ€å¤§å€¼ï¼Œå¦åˆ™å–size+1</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateCapacity</span><span class="params">(Object[] elementData, <span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.<span class="built_in">max</span>(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">å¦‚æœ å½“å‰éœ€æ±‚çš„æœ€å°å®¹é‡ æ¯”å†…éƒ¨çš„æ•°ç»„é•¿åº¦å¤§ åˆ™è¡¨ç¤ºå†…éƒ¨æ•°ç»„å·²ç»å­˜æ”¾ä¸äº† æ­¤æ—¶ä¾¿éœ€è¦è¿›è¡Œæ‰©å®¹å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥å‘ç°ï¼ŒArrayListåœ¨è¿›è¡Œaddæ“ä½œçš„æ—¶å€™ä¼šå…ˆç¡®ä¿å½“å‰å®¹é‡æ˜¯å¦è¶³å¤Ÿï¼Œå¦‚æœä¸è¶³å˜å›è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚</p>
<p><strong>ç»“è®ºï¼š</strong><br>æ­¤æ—¶ï¼Œä¾¿å¯ä»¥å¾—å‡ºç»“è®ºï¼Œå½“ArrayListåœ¨è¿›è¡Œaddæ“ä½œçš„æ—¶å€™ï¼Œå¦‚æœæ‰€éœ€è¦çš„æ•°é‡å¤§äºå½“å‰ArrayListå†…éƒ¨æ•°ç»„elementDataçš„é•¿åº¦çš„æ—¶å€™ï¼Œç”±äºelementDataå·²ç»å­˜æ”¾ä¸ä¸‹ï¼Œæ­¤æ—¶ä¾¿éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚</p>
<h2 id="æ€ä¹ˆæ‰©å®¹ï¼Ÿ"><a href="#æ€ä¹ˆæ‰©å®¹ï¼Ÿ" class="headerlink" title="æ€ä¹ˆæ‰©å®¹ï¼Ÿ"></a>æ€ä¹ˆæ‰©å®¹ï¼Ÿ</h2><figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> void grow(int minCapacity) &#123;</span><br><span class="line">    int oldCapacity = elementData.length;</span><br><span class="line">    <span class="comment">// æ–°å®¹é‡ä¸ºæ—§å®¹é‡çš„ 1.5å€</span></span><br><span class="line">    int <span class="keyword">new</span><span class="type">Capacity</span> = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// æ–°å®¹é‡æ¯”éœ€æ±‚å®¹é‡å°ï¼Œåˆ™æ–°å®¹é‡ç›´æ¥è®¾ç½®ä¸ºéœ€è¦çš„å®¹é‡</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span><span class="type">Capacity</span> - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">new</span><span class="type">Capacity</span> = minCapacity;</span><br><span class="line">    <span class="comment">// å¦‚æœæ–°å®¹é‡æ¯” é»˜è®¤æœ€å¤§æ•°å€¼å¤§ Integer.MAX_VALUE-8,åˆ™åˆ¤æ–­éœ€è¦çš„æ˜¯å¦è¶…è¿‡MAX_ARRAY_SIZEï¼Œè¶…è¿‡å–æœ€å¤§ï¼Œå¦åˆ™å–MAX_ARRAY_SIZE</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span><span class="type">Capacity</span> - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">new</span><span class="type">Capacity</span> = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// è¿›è¡ŒåŸæ•°ç»„å¤åˆ¶ï¼Œæ‰©å®¹ã€‚</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, <span class="keyword">new</span><span class="type">Capacity</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> int hugeCapacity(int minCapacity) &#123;</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">OutOfMemoryError</span>();</span><br><span class="line">    <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class="line">        Integer.MAX_VALUE :<span class="type"></span></span><br><span class="line"><span class="type">        MAX_ARRAY_SIZE</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="../resource/java/ArrayList%E6%89%A9%E5%AE%B9.jpg" alt=""></p>
<p><strong><em>ç¤ºä¾‹ï¼š</em></strong><br><img src="../resource/java/ArrayList%E6%89%A9%E5%AE%B9%E7%A4%BA%E4%BE%8B.jpg" alt=""></p>
<p>æ€»ç»“ï¼š</p>
<ol>
<li>ArrayListçš„æ‰©å®¹æ˜¯ä»¥åŸå®¹é‡çš„1.5å€ä¸ºåŸºç¡€ã€‚</li>
<li>æ‰©å®¹çš„è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œè¶Šç•Œæ£€æŸ¥ã€‚</li>
<li><strong><em>å¦‚æœéœ€æ±‚å®¹é‡å¤§äºåŸå®¹é‡çš„1.5å€ï¼Œåˆ™ä¼šç›´æ¥æ‰©å®¹åˆ°éœ€æ±‚å®¹é‡ã€‚</em></strong>æ‰€ä»¥å½“æˆ‘ä»¬å¤šæ¬¡é€šè¿‡addAllè¿›è¡Œæ–°å¢å…ƒç´ ï¼ˆå¹¶ä¸”æ–°å¢å…ƒç´ æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼‰çš„æ—¶å€™ï¼Œæ˜¯å¦å¯ä»¥è°ƒç”¨ensureCapacity()æ–¹æ³•æ‰‹åŠ¨æ‰©å®¹ï¼Œä»¥é¿å…addAllçš„å¤šæ¬¡é¢‘ç¹æ‰©å®¹ã€‚</li>
</ol>
<h2 id="å…¶ä»–é‡è¦å‡½æ•°"><a href="#å…¶ä»–é‡è¦å‡½æ•°" class="headerlink" title="å…¶ä»–é‡è¦å‡½æ•°"></a>å…¶ä»–é‡è¦å‡½æ•°</h2><h3 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h3><details>
<summary>view Code</summary>

<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E remove(<span class="keyword">int</span> <span class="keyword">index</span>) &#123;</span><br><span class="line">     <span class="comment">//è¶Šç•Œæ£€æŸ¥</span></span><br><span class="line">      rangeCheck(<span class="keyword">index</span>);</span><br><span class="line"></span><br><span class="line">      modCount++; </span><br><span class="line">      <span class="comment">//è®¾ç½®å€¼</span></span><br><span class="line">      E oldValue = elementData(<span class="keyword">index</span>);</span><br><span class="line">      <span class="comment">//ä¸éœ€è¦ç§»åŠ¨çš„æ•°ç»„å…ƒç´ </span></span><br><span class="line">      <span class="keyword">int</span> numMoved = size - <span class="keyword">index</span> - <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">         <span class="comment">//ç§»åŠ¨åˆ é™¤å…ƒç´ åé¢çš„æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">          System.arraycopy(elementData, <span class="keyword">index</span>+<span class="number">1</span>, elementData, <span class="keyword">index</span>,</span><br><span class="line">                           numMoved);</span><br><span class="line">      <span class="comment">//è®¾ç½®ä¸ºnullï¼Œå½“æ•°ç»„ä¸ºnullçš„æ—¶å€™åˆ©äºGCå›æ”¶</span></span><br><span class="line">      elementData[--size] = <span class="keyword">null</span>; </span><br><span class="line">      <span class="keyword">return</span> oldValue;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

</details>

<p><strong>è¯´æ˜:</strong> removeæ–¹æ³•è¿›è¡Œäº†è¶Šç•Œæ£€æŸ¥ï¼Œç”±äºæ•°ç»„çš„ç‰¹æ€§ï¼Œremoveåéœ€è¦å°†removeæ‰çš„ä½ç½®ä¹‹åçš„æ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ï¼Œä»¥ä¿è¯removeåArrayListè¿˜æ˜¯ä¿æŒå…¶åŸºæœ¬æ“ä½œä¸å˜ã€‚</p>
<h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf"></a>indexOf</h3><details>
<summary>view Code</summary>

<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> indexOf(Object o) &#123;</span><br><span class="line">      <span class="comment">//ç©ºè¿›è¡Œç‰¹æ®Šå¤„ç†</span></span><br><span class="line">       <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">               <span class="keyword">if</span> (elementData[i]==<span class="literal">null</span>)</span><br><span class="line">                   <span class="keyword">return</span> i;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="comment">//å…¶ä½™éƒ¨åˆ†å‡ä½¿ç”¨equalsåˆ¤æ–­</span></span><br><span class="line">           <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">               <span class="keyword">if</span> (o.equals(elementData[i]))</span><br><span class="line">                   <span class="keyword">return</span> i;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

</details>

<p><strong>è¯´æ˜:</strong> indexOfæŸ¥æ‰¾ä½ç½®çš„æ–¹æ³•ï¼Œå¯¹äºnullè¿›è¡Œäº†==å·æ¯”è¾ƒï¼Œå¯¹äºæ™®é€šå…ƒç´ éƒ½ä½¿ç”¨çš„equalsæ–¹æ³•è¿›è¡Œæ¯”è¾ƒ</p>
<h3 id="subList"><a href="#subList" class="headerlink" title="subList"></a>subList</h3><details>
<summary>view Code</summary>

<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">public</span> List&lt;E&gt; subList(int fromIndex, int toIndex) &#123;</span><br><span class="line">        subListRangeCheck(fromIndex, toIndex, size);</span><br><span class="line">        <span class="keyword">return</span> new SubList(<span class="keyword">this</span>, <span class="number">0</span>, fromIndex, toIndex);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// subListæ„é€ å‡½æ•°</span></span><br><span class="line">    SubList(AbstractList&lt;E&gt; parent,</span><br><span class="line">                int offset, int fromIndex, int toIndex) &#123;</span><br><span class="line">            <span class="keyword">this</span>.parent = parent;</span><br><span class="line">            <span class="keyword">this</span>.parentOffset = fromIndex;</span><br><span class="line">            <span class="keyword">this</span>.offset = offset + fromIndex;</span><br><span class="line">            <span class="keyword">this</span>.size = toIndex - fromIndex;</span><br><span class="line">            <span class="keyword">this</span>.modCount = ArrayList.<span class="keyword">this</span>.modCount;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> E <span class="keyword">set</span>(int index, E e) &#123;</span><br><span class="line">            rangeCheck(index);</span><br><span class="line">            checkForComodification();</span><br><span class="line">            E oldValue = ArrayList.<span class="keyword">this</span>.elementData(offset + index);</span><br><span class="line">            ArrayList.<span class="keyword">this</span>.elementData[offset + index] = e;</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

</details>


<p><strong>è¯´æ˜:</strong> ä½¿ç”¨æ•°ç»„çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šä½¿ç”¨subListæ–¹æ³•å»æ„å»ºä¸€ä¸ªå­è§†å›¾ï¼Œé€šè¿‡subListæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå­æ–¹æ³•çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯é’ˆå¯¹äºåŸArrayListä¸­çš„æ•°ç»„çš„ï¼Œ<strong><em>æ•…è€Œåœ¨å­è§†å›¾ä¸Šè¿›è¡Œçš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šåæ˜ åˆ°åŸArrayListå¯¹è±¡ä¸­</em></strong></p>
<!-- æ€»ç»“ -->
<h1 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h1><ol>
<li>ArrayListçš„å‡ºç°ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ç§è‡ªç»´æŠ¤çš„æ•°ç»„æ•°æ®ç»“æ„ï¼Œç”¨æˆ·ä¸éœ€è¦å†è€ƒè™‘è¶Šç•Œï¼Œæ•°ç»„æ‰©å®¹ï¼Œæ’å…¥å…ƒç´ æ•°ç»„çš„å…ƒç´ ç§»åŠ¨ç­‰æ“ä½œã€‚</li>
<li>ArrayListå†…éƒ¨ä¾æ—§æ˜¯é€šè¿‡æ•°ç»„çš„æ•°æ®ç»“æ„å®ç°çš„ã€‚</li>
<li>ArrayListçš„è‡ªåŠ¨æ‰©å®¹æœºåˆ¶æ˜¯é€šè¿‡æ•°ç»„å¤åˆ¶å®ç°çš„ï¼Œæ‰©å®¹æ“ä½œæ˜¯åœ¨æ–°å¢å…ƒç´ çš„æ—¶å€™è¿›è¡Œå®¹é‡æ£€æŸ¥ï¼Œè¿›è¡Œæ‰©å®¹</li>
<li>ArrayListçš„æ‰©å®¹é»˜è®¤å®¹é‡æ˜¯åŸå®¹é‡çš„1.5å€ï¼Œå¦‚æœæ–°å¢å…ƒç´ é‡å¤§äº1.5å€åŸå®¹é‡ï¼Œåˆ™ä¼šç›´æ¥æ‰©å®¹åˆ°æ–°å¢å…ƒç´ åéœ€è¦çš„å¤§å°ã€‚</li>
<li>ArrayListçš„subListå­è§†å›¾æ–¹æ³•ï¼Œè¿›è¡Œä¿®æ”¹æ“ä½œçš„æ—¶å€™æ˜¯ç›´æ¥åæ˜ åˆ°åŸArrayListä¸­çš„ã€‚</li>
</ol>
<p>ArrayListå…·æœ‰éšæœºè¯»å†™çš„ä¼˜ç‚¹ï¼Œå¯¹äºç‰¹å®šä½ç½®çš„å…ƒç´ è·å–ä¿®æ”¹ç­‰æ“ä½œå¯ä»¥æœ‰O(1)çš„å¤æ‚åº¦ï¼Œä½†æ˜¯å´åœ¨æ’å…¥åˆ é™¤ä¸­é—´å…ƒç´ ç­‰æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œå¤§é‡å…ƒç´ ç§»åŠ¨çš„æ“ä½œï¼Œæ•ˆç‡ä½ä¸‹O(n)ã€‚</p>
]]></content>
      <categories>
        <category>java</category>
        <category>javaé›†åˆ</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>é›†åˆ</tag>
        <tag>ArrayList</tag>
      </tags>
  </entry>
  <entry>
    <title>javaé›†åˆæ¡†æ¶è¯¦è§£</title>
    <url>/post/82f1582a.html</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>  ä½œä¸ºjavaç¨‹åºå‘˜ï¼Œjavaé›†åˆåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„éå¸¸é¢‘ç¹ï¼Œä¾‹å¦‚ ArrayList,HashMapï¼ŒåŸºæœ¬å¯ä»¥è¯´åœ¨æ¯ä¸€ä¸ªé¡¹ç›®ä¸­éƒ½ä¼šæœ‰ã€‚ä½†æ˜¯å´åˆå¾ˆå°‘å»äº†è§£å…¶åº•å±‚åŸç†ã€‚æ‰€ä»¥å‡†å¤‡å¯¹javaé›†åˆæ¡†æ¶æºç è¿›è¡Œæ¢ç©¶ï¼Œæ¢³ç†é›†åˆæ¡†æ¶æ•°æ®ç»“æ„å’Œè®¾è®¡åŸç†ã€‚ æ­¤æ¬¡æ¢³ç†å¸Œæœ›èƒ½å®ç°ä¸‹é¢çš„ç›®æ ‡ï¼š<br>      &emsp; 1. æ¸©æ•…è€ŒçŸ¥æ–°ï¼Œå¯¹äºjavaåº•å±‚çŸ¥è¯†çš„å›é¡¾ã€‚<br>      &emsp; 2. äº†è§£æ¶‰åŠæ€æƒ³ï¼Œæå‡ä»£ç è®¾è®¡æ°´å¹³ã€‚<br>      &emsp; 3. äº†è§£åº•å±‚è®¾è®¡ï¼Œèƒ½å¤Ÿä»¥æœ€æ°å½“çš„æ–¹å¼ä½¿ç”¨javaçš„é›†åˆ </p>
<h1 id="æ¢³ç†çº¿è·¯"><a href="#æ¢³ç†çº¿è·¯" class="headerlink" title="æ¢³ç†çº¿è·¯"></a>æ¢³ç†çº¿è·¯</h1><p><img src="../resource/java/java%E9%9B%86%E5%90%88.png" alt=""></p>
<h1 id="é›†åˆæ¡†æ¶å›¾"><a href="#é›†åˆæ¡†æ¶å›¾" class="headerlink" title="é›†åˆæ¡†æ¶å›¾"></a>é›†åˆæ¡†æ¶å›¾</h1><p><img src="../resource/java/javaCollection.jpeg" alt="å›¾ç‰‡æºäºç™¾åº¦"></p>
<center><font size=1>æ³¨æ˜ï¼šå›¾ç‰‡æºäºç™¾åº¦</font></center>  
<br/>

<p>æ€»ç»“ï¼š</p>
<ol>
<li>6å¤§é¡¶å±‚æ¥å£:Collection ,Iterator,Map,List,Set,Queue</li>
<li>5å¤§æŠ½è±¡ç±» AbstractCollection,AbstractList,AbstractSet,AbstractMap,AbstractSeqentialList.</li>
<li>10ä¸ªä¸€çº§å®ç°ç±»</li>
<li>ä¸¤ä¸ªåŠŸèƒ½æ¥å£ï¼šComparable,Comparator</li>
<li>ä¸¤å¤§å·¥å…·ç±»: Collections,Arrays</li>
</ol>
<h1 id="åŸºç¡€æ¥å£-ç±»æ¦‚è§ˆ"><a href="#åŸºç¡€æ¥å£-ç±»æ¦‚è§ˆ" class="headerlink" title="åŸºç¡€æ¥å£/ç±»æ¦‚è§ˆ"></a>åŸºç¡€æ¥å£/ç±»æ¦‚è§ˆ</h1><p><img src="../resource/java/%E9%9B%86%E5%90%88%E7%B1%BB%E6%8E%A5%E5%8F%A3%E6%A2%B3%E7%90%86.png" alt=""></p>
<h1 id="é‡è¦æ¥å£è¯´æ˜"><a href="#é‡è¦æ¥å£è¯´æ˜" class="headerlink" title="é‡è¦æ¥å£è¯´æ˜"></a>é‡è¦æ¥å£è¯´æ˜</h1><h2 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a>Iterator</h2><details>
<summary>View Code</summary>

<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">public<span class="built_in"> interface </span>Iterator&lt;E&gt; &#123;</span><br><span class="line">    boolean hasNext();</span><br><span class="line">    E next();</span><br><span class="line">   <span class="built_in"> default </span>void <span class="builtin-name">remove</span>() &#123;<span class="built_in">..</span>.&#125;</span><br><span class="line">   <span class="built_in"> default </span>void forEachRemaining(Consumer&lt;? super E&gt; action) &#123;<span class="built_in">..</span>.&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<p><strong>è¯´æ˜</strong></p>
<ol>
<li>iteratoræ¥å£å®šä¹‰è¿­ä»£å™¨çš„åŸºæœ¬æ“ä½œ,ä¸»è¦æ–¹æ³• hasNext(),next().</li>
</ol>
<h2 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h2><p>é™¤äº†Mapæ¥å£ï¼Œå…¶ä»–çš„æ¥å£éƒ½ç»§æ‰¿è‡ªCollectionæ¥å£ï¼Œå¹¶ä¸”ç”±äºjavaå¤šæ€çš„ç‰¹æ€§ï¼ŒInterface i1 = new Immplements() ã€‚ æ­¤æ—¶è¯¥å¯¹è±¡i1è°ƒç”¨çš„æ–¹æ³•å¿…é¡»æ˜¯æ¥å£ä¸­æ‰€æœ‰çš„ï¼Œæ•…è€Œå¯¹äºCollectionæ¥å£å°±å¿…é¡»è¦æœ‰ä¸ªäº†è§£ã€‚</p>
<details>
<summary>View Code</summary>

<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">public<span class="built_in"> interface </span>Collection&lt;E&gt; extends Iterable&lt;E&gt; &#123;</span><br><span class="line">    int size();</span><br><span class="line">    boolean isEmpty();</span><br><span class="line">    boolean contains(Object o);</span><br><span class="line">    Iterator&lt;E&gt; iterator();</span><br><span class="line">    Object[] toArray();</span><br><span class="line">    &lt;T&gt; T[] toArray(T[] a);</span><br><span class="line">    boolean <span class="builtin-name">add</span>(E e);</span><br><span class="line">    boolean <span class="builtin-name">remove</span>(Object o);</span><br><span class="line">    boolean containsAll(Collection&lt;?&gt; c);</span><br><span class="line">    boolean addAll(Collection&lt;? extends E&gt; c);</span><br><span class="line">    boolean removeAll(Collection&lt;?&gt; c);</span><br><span class="line">   <span class="built_in"> default </span>boolean removeIf(Predicate&lt;? super E&gt; filter) &#123;<span class="built_in">..</span>.&#125;</span><br><span class="line">    boolean retainAll(Collection&lt;?&gt; c);</span><br><span class="line">    void clear();</span><br><span class="line">    boolean equals(Object o);</span><br><span class="line">    int hashCode();</span><br><span class="line">    @Override</span><br><span class="line">   <span class="built_in"> default </span>Spliterator&lt;E&gt; spliterator() &#123;<span class="built_in">..</span>.&#125;</span><br><span class="line">   <span class="built_in"> default </span>Stream&lt;E&gt; stream() &#123;<span class="built_in">..</span>.&#125;</span><br><span class="line">   <span class="built_in"> default </span>Stream&lt;E&gt; parallelStream() &#123;<span class="built_in">..</span>.&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<p><strong>è¯´æ˜ï¼š</strong></p>
<ol>
<li>ä½œä¸ºé›†åˆé¡¶å±‚æ¥å£çš„Collection å®šä¹‰äº†å¯¹äºä¸€ä¸ªé›†åˆæœ€æ™®éçš„æ“ä½œï¼Œå¢ï¼Œåˆ ï¼Œåˆ¤ç©ºï¼Œè½¬æ•°ç»„ï¼Œåˆ¤æ–­åŒ…å«ç­‰ç­‰åŸºæœ¬æ“ä½œã€‚</li>
<li>é›†åˆç»§æ‰¿äº†Iterableæ¥å£ï¼ŒåŒ…å«äº† iteratoræ–¹æ³•ï¼Œå¯¹äºé›†åˆæ¥è¯´ï¼Œéœ€è¦å¯éå†é›†åˆä¸­æ‰€æœ‰å…ƒç´ </li>
</ol>
<h2 id="Mapæ¥å£"><a href="#Mapæ¥å£" class="headerlink" title="Mapæ¥å£"></a>Mapæ¥å£</h2><details>
<summary>View Code</summary>

<figure class="highlight nimrod"><table><tr><td class="code"><pre><span class="line">public <span class="keyword">interface</span> <span class="type">Map</span>&lt;K,V&gt; &#123;</span><br><span class="line">    <span class="built_in">int</span> size();</span><br><span class="line">    boolean isEmpty();</span><br><span class="line">    boolean containsKey(<span class="type">Object</span> key);</span><br><span class="line">    boolean containsValue(<span class="type">Object</span> value);</span><br><span class="line">    V get(<span class="type">Object</span> key);</span><br><span class="line">    V put(K key, V value);</span><br><span class="line">    V remove(<span class="type">Object</span> key);</span><br><span class="line">    <span class="built_in">void</span> putAll(<span class="type">Map</span>&lt;? extends K, ? extends V&gt; m);</span><br><span class="line">    <span class="built_in">void</span> clear();</span><br><span class="line">    <span class="type">Set</span>&lt;K&gt; keySet();</span><br><span class="line">    <span class="type">Collection</span>&lt;V&gt; values();</span><br><span class="line">    <span class="type">Set</span>&lt;<span class="type">Map</span>.<span class="type">Entry</span>&lt;K, V&gt;&gt; entrySet();</span><br><span class="line">    <span class="keyword">interface</span> <span class="type">Entry</span>&lt;K,V&gt; &#123;</span><br><span class="line">        K getKey();</span><br><span class="line">        V getValue();</span><br><span class="line">        V setValue(V value);</span><br><span class="line">        boolean equals(<span class="type">Object</span> o);</span><br><span class="line">        <span class="built_in">int</span> hashCode();</span><br><span class="line">        public <span class="keyword">static</span> &lt;K extends <span class="type">Comparable</span>&lt;? super K&gt;, V&gt; <span class="type">Comparator</span>&lt;<span class="type">Map</span>.<span class="type">Entry</span>&lt;K,V&gt;&gt; comparingByKey() <span class="meta">&#123;...&#125;</span></span><br><span class="line">        public <span class="keyword">static</span> &lt;K, V extends <span class="type">Comparable</span>&lt;? super V&gt;&gt; <span class="type">Comparator</span>&lt;<span class="type">Map</span>.<span class="type">Entry</span>&lt;K,V&gt;&gt; comparingByValue() &#123; ... &#125;</span><br><span class="line">        public <span class="keyword">static</span> &lt;K, V&gt; <span class="type">Comparator</span>&lt;<span class="type">Map</span>.<span class="type">Entry</span>&lt;K, V&gt;&gt; comparingByKey(<span class="type">Comparator</span>&lt;? super K&gt; cmp) <span class="meta">&#123;...&#125;</span></span><br><span class="line">        public <span class="keyword">static</span> &lt;K, V&gt; <span class="type">Comparator</span>&lt;<span class="type">Map</span>.<span class="type">Entry</span>&lt;K, V&gt;&gt; comparingByValue(<span class="type">Comparator</span>&lt;? super V&gt; cmp) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">    boolean equals(<span class="type">Object</span> o);</span><br><span class="line">    <span class="built_in">int</span> hashCode();</span><br><span class="line">    default V getOrDefault(<span class="type">Object</span> key, V defaultValue) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default <span class="built_in">void</span> forEach(<span class="type">BiConsumer</span>&lt;? super K, ? super V&gt; action) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default <span class="built_in">void</span> replaceAll(<span class="type">BiFunction</span>&lt;? super K, ? super V, ? extends V&gt; function) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default V putIfAbsent(K key, V value) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default boolean remove(<span class="type">Object</span> key, <span class="type">Object</span> value) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default boolean replace(K key, V oldValue, V newValue) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default V replace(K key, V value) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default V computeIfAbsent(K key,</span><br><span class="line">            <span class="type">Function</span>&lt;? super K, ? extends V&gt; mappingFunction) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default V computeIfPresent(K key,</span><br><span class="line">            <span class="type">BiFunction</span>&lt;? super K, ? super V, ? extends V&gt; remappingFunction) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default V compute(K key,</span><br><span class="line">            <span class="type">BiFunction</span>&lt;? super K, ? super V, ? extends V&gt; remappingFunction) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default V merge(K key, V value,</span><br><span class="line">            <span class="type">BiFunction</span>&lt;? super V, ? super V, ? extends V&gt; remappingFunction) <span class="meta">&#123;...&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>


<p><strong>è¯´æ˜:</strong></p>
<ol>
<li>é€šç”¨é›†åˆéƒ½æ˜¯å•å€¼ï¼ŒMapæ˜¯ kv åŒå€¼ï¼Œæ•…è€ŒMapçš„æ¥å£ä¸Collectionçš„æ¥å£ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œè¿™ä¹Ÿæ˜¯å…¶ä»–é›†åˆæ¥å£å‡é›†æˆCollectionè€ŒMapä¸ç»§æ‰¿çš„åŸå› </li>
<li>Mapçš„åŸºç¡€æ“ä½œä¾èµ–äºEntryï¼Œå¤–å±‚æ˜¯å¯¹äºEntryçš„Seté›†åˆè§†å›¾ã€‚</li>
<li>Mapæ¥å£å®šä¹‰Mapç±»å‹çš„åŸºæœ¬å¢åŠ ï¼Œåˆ é™¤ï¼Œåˆ¤æ–­ï¼Œæ¸…ç©ºï¼Œå¤§å°ç­‰æ–¹æ³•</li>
</ol>
<h2 id="Comparable-amp-Comparator"><a href="#Comparable-amp-Comparator" class="headerlink" title="Comparable&amp;Comparator"></a>Comparable&amp;Comparator</h2><details>
<summary>View Code</summary>

<figure class="highlight nimrod"><table><tr><td class="code"><pre><span class="line">public <span class="keyword">interface</span> <span class="type">Comparable</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="built_in">int</span> compareTo(T var1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public <span class="keyword">interface</span> <span class="type">Comparator</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="built_in">int</span> compare(T o1, T o2);</span><br><span class="line"></span><br><span class="line">    boolean equals(<span class="type">Object</span> obj);</span><br><span class="line">    default <span class="type">Comparator</span>&lt;T&gt; reversed() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Collections</span>.reverseOrder(this);</span><br><span class="line">    &#125;</span><br><span class="line">    default <span class="type">Comparator</span>&lt;T&gt; thenComparing(<span class="type">Comparator</span>&lt;? super T&gt; other) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default &lt;U&gt; <span class="type">Comparator</span>&lt;T&gt; thenComparing(</span><br><span class="line">            <span class="type">Function</span>&lt;? super T, ? extends U&gt; keyExtractor,</span><br><span class="line">            <span class="type">Comparator</span>&lt;? super U&gt; keyComparator)</span><br><span class="line">    <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default &lt;U extends <span class="type">Comparable</span>&lt;? super U&gt;&gt; <span class="type">Comparator</span>&lt;T&gt; thenComparing(</span><br><span class="line">            <span class="type">Function</span>&lt;? super T, ? extends U&gt; keyExtractor)</span><br><span class="line">    <span class="meta">&#123;... &#125;</span></span><br><span class="line"><span class="meta">    default Comparator&lt;T&gt; thenComparingInt(ToIntFunction&lt;? super T&gt; keyExtractor) &#123;...&#125;</span></span><br><span class="line">    default <span class="type">Comparator</span>&lt;T&gt; thenComparingLong(<span class="type">ToLongFunction</span>&lt;? super T&gt; keyExtractor) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    default <span class="type">Comparator</span>&lt;T&gt; thenComparingDouble(<span class="type">ToDoubleFunction</span>&lt;? super T&gt; keyExtractor) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    public <span class="keyword">static</span> &lt;T extends <span class="type">Comparable</span>&lt;? super T&gt;&gt; <span class="type">Comparator</span>&lt;T&gt; reverseOrder() <span class="meta">&#123;...&#125;</span></span><br><span class="line">    @<span class="type">SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    public <span class="keyword">static</span> &lt;T extends <span class="type">Comparable</span>&lt;? super T&gt;&gt; <span class="type">Comparator</span>&lt;T&gt; naturalOrder() <span class="meta">&#123;...&#125;</span></span><br><span class="line">    public <span class="keyword">static</span> &lt;T&gt; <span class="type">Comparator</span>&lt;T&gt; nullsFirst(<span class="type">Comparator</span>&lt;? super T&gt; comparator) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    public <span class="keyword">static</span> &lt;T&gt; <span class="type">Comparator</span>&lt;T&gt; nullsLast(<span class="type">Comparator</span>&lt;? super T&gt; comparator) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    public <span class="keyword">static</span> &lt;T, U&gt; <span class="type">Comparator</span>&lt;T&gt; comparing(</span><br><span class="line">            <span class="type">Function</span>&lt;? super T, ? extends U&gt; keyExtractor,</span><br><span class="line">            <span class="type">Comparator</span>&lt;? super U&gt; keyComparator)</span><br><span class="line">    <span class="meta">&#123;...&#125;</span></span><br><span class="line">    public <span class="keyword">static</span> &lt;T, U extends <span class="type">Comparable</span>&lt;? super U&gt;&gt; <span class="type">Comparator</span>&lt;T&gt; comparing(</span><br><span class="line">            <span class="type">Function</span>&lt;? super T, ? extends U&gt; keyExtractor)</span><br><span class="line">    <span class="meta">&#123;...&#125;</span></span><br><span class="line">    public <span class="keyword">static</span> &lt;T&gt; <span class="type">Comparator</span>&lt;T&gt; comparingInt(<span class="type">ToIntFunction</span>&lt;? super T&gt; keyExtractor) <span class="meta">&#123;...&#125;</span></span><br><span class="line">    public <span class="keyword">static</span> &lt;T&gt; <span class="type">Comparator</span>&lt;T&gt; comparingLong(<span class="type">ToLongFunction</span>&lt;? super T&gt; keyExtractor) <span class="meta">&#123;...&#125;</span></span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span>&lt;T&gt; <span class="type">Comparator</span>&lt;T&gt; comparingDouble(<span class="type">ToDoubleFunction</span>&lt;? super T&gt; keyExtractor) <span class="meta">&#123;...&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<p><strong>è¯´æ˜:</strong></p>
<ol>
<li>Comparableä¸Comparatoréƒ½æ˜¯ç”¨ä½œå®šä¹‰å¯æ’åºå’Œæ’åºæ–¹å¼çš„æ¥å£ï¼Œä¸»è¦åŒºåˆ«Comparableæ˜¯å†…æ¯”è¾ƒï¼Œç”¨ä½œå½“å‰å¯¹è±¡å’Œå…¶ä»–å¯¹è±¡æ¯”è¾ƒï¼ŒCOmparatoræ˜¯å¤–æ¯”è¾ƒï¼Œç”¨äºä¸¤ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒã€‚</li>
</ol>
<h2 id="Collections-amp-Arrays"><a href="#Collections-amp-Arrays" class="headerlink" title="Collections&amp;Arrays"></a>Collections&amp;Arrays</h2><p>Collectionsï¼šä¸»è¦åŒ…å«äº†é›†åˆçš„å„ç§é€šç”¨æ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œæ’åºï¼Œæ‹·è´ï¼Œä¹±åºï¼Œååºï¼ŒæŸ¥æ‰¾ï¼Œæ›¿æ¢ç­‰ç­‰ã€‚Arraysç±»ï¼Œä¸»è¦æ˜¯æ•°ç»„çš„åŸºæœ¬æ“ä½œï¼ŒåŒ…å«äº†å„ç§æ’åºæœç´¢å¡«å……ç­‰åŸºæœ¬æ“ä½œ</p>
<h2 id="equals-amp-hashCode"><a href="#equals-amp-hashCode" class="headerlink" title="equals &amp; hashCode"></a>equals &amp; hashCode</h2><p>HaseCode å’Œ equalsæ–¹æ³•æ˜¯ä¸¤ä¸ªåŸºç¡€æ–¹æ³•ï¼Œå…¶å®šä¹‰åœ¨Object.javaç±»ä¸­ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å®šä¹‰äº†javaä¸­åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„æ–¹æ³•ã€‚ </p>
<p>ä¸ºä»€ä¹ˆä¼šæœ‰equalsæ–¹æ³•å‘¢ï¼Œjavaä¸­== æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç»Ÿä¸€ä¸ªå¯¹è±¡(<a href="https://blog.csdn.net/AlbenXie/article/details/88921344" target="_blank" rel="noopener">æ­¤å¤„å­˜åœ¨ä¸€ä¸ªé¢è¯•é¢˜ï¼Œå°±æ˜¯Stringçš„ä¸åŒåˆ›å»ºæ–¹å¼çš„==æ¯”è¾ƒã€‚æ¶‰åŠStringå¸¸é‡è¯çš„æ¦‚å¿µ</a>)ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œæ¯”è¾ƒç»Ÿä¸€å¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚æ‰€ä»¥ä¾¿å‡ºç°äº†equalsæ–¹æ³•ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒã€‚ </p>
<p><strong><em>æ³¨æ„ï¼šç”±äºhashMapçš„æ¯”è¾ƒä¸­å³ä½¿ç”¨äº†equalsä¹Ÿæ˜¯ç”¨åˆ°äº†hashCodeæ‰€ä»¥å¯¹äºä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœé‡å†™äº†equalsä¸€å®šè¦é‡å†™hashCodeï¼Œä»¥å…åœ¨æ•£åˆ—è¡¨ç­‰ç­‰åœºæ™¯ä¸‹å‡ºç°å¼‚å¸¸çš„æƒ…å†µ</em></strong></p>
<p>Objectè§„èŒƒè§„å®šï¼š</p>
<ol>
<li>åœ¨ç»Ÿä¸€ä¸ªjavaæ‰§è¡Œç¨‹åºä¸­ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡çš„equalsæ–¹æ³•æ²¡æœ‰å‘ç”Ÿå˜æ›´ï¼Œé‚£ä¹ˆæ— è®ºè°ƒåŠ¨å¤šå°‘æ¬¡hashCodeæ–¹æ³•ï¼Œå§‹ç»ˆè¿”å›åŒä¸€ä¸ªå€¼</li>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„equals()ç›¸åŒï¼Œé‚£ä¹ˆä¸¤ä¸ªå¯¹è±¡çš„hashCode()å¿…é¡»è¿”å›ç›¸åŒçš„å€¼</li>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡equalsä¸åŒï¼Œé‚£ä¹ˆå¹¶ä¸è¦æ±‚ä¸€å®šä¸èƒ½è¿”å›ä¸¤ä¸ªç›¸åŒçš„hashCodeã€‚ä½†æ˜¯ä¸equalçš„ä¸¤ä¸ªå€¼äº§ç”Ÿä¸åŒçš„hashCodeå¯ä»¥æœ‰æ•ˆçš„æå‡æ•£åˆ—è¡¨çš„æ€§èƒ½ï¼ˆæ­¤å¤„å‚è§hashMapçš„æºç åˆ†æï¼‰ã€‚</li>
</ol>
<p>equalsç›¸ç­‰ï¼ŒhashCodeå¿…é¡»ç›¸åŒã€‚ equalsä¸åŒï¼ŒhashCodeå¯ä»¥ç›¸åŒï¼Œä½†æ˜¯å»ºè®®ä¸åŒã€‚åº”ä¸ºç›¸åŒçš„hashCodeå¤šäº†ä¹‹åï¼Œå¯èƒ½ä¼šè®©hashMapé€€åŒ–æˆé“¾è¡¨ç»“æ„ã€‚</p>
<details>
<summary>åŸæ–‡æ³¨é‡Š</summary>

<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Returns </span>a<span class="markdown"> hash code value for </span>the<span class="markdown"> object. This method is</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>supported for </span>the<span class="markdown"> benefit of hash tables </span>such<span class="markdown"> as those provided by</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>&#123;@link java.util.HashMap&#125;.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>The general contract of &#123;@code hashCode&#125; is:</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span>Whenever it is invoked on </span>the<span class="markdown"> same object </span>more<span class="markdown"> than once during</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span></span>an<span class="markdown"> execution of </span>a<span class="markdown"> Java application, </span>the<span class="markdown"> &#123;@code hashCode&#125; method</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>must consistently return </span>the<span class="markdown"> same integer, provided no information</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>used in &#123;@code equals&#125; comparisons on </span>the<span class="markdown"> object is modified.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>This integer need not remain consistent from one execution of </span>an</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>application to another execution of </span>the<span class="markdown"> same application.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span>If two objects </span>are<span class="markdown"> equal according to </span>the<span class="markdown"> &#123;@code equals(Object)&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>method, then calling </span>the<span class="markdown"> &#123;@code hashCode&#125; method on each of</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span></span>the<span class="markdown"> two objects must produce </span>the<span class="markdown"> same integer result.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span>It is <span class="xml"><span class="tag">&lt;<span class="name">em</span>&gt;</span></span>not<span class="xml"><span class="tag">&lt;/<span class="name">em</span>&gt;</span></span> required that if two objects </span>are<span class="markdown"> unequal</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>according to </span>the<span class="markdown"> &#123;@link java.lang.Object#equals(java.lang.Object)&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>method, then calling </span>the<span class="markdown"> &#123;@code hashCode&#125; method on each of </span>the</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>two objects must produce distinct integer results.  However, </span>the</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>programmer </span>should<span class="markdown"> be aware that producing distinct integer results</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *     </span>for unequal objects may improve </span>the<span class="markdown"> performance of hash tables.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>As much as is reasonably practical, </span>the<span class="markdown"> hashCode method defined by</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>class &#123;@code Object&#125; does return distinct integers for distinct</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>objects. (This is typically implemented by converting </span>the<span class="markdown"> internal</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>address of </span>the<span class="markdown"> object into </span>an<span class="markdown"> integer, </span>but<span class="markdown"> this implementation</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>technique is not required by </span>the</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Java&amp;trade; programming language.)</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return  </span>a<span class="markdown"> hash code value for this object.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@see     java.lang.Object#equals(java.lang.Object)</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@see     java.lang.System#identityHashCode</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public native <span class="built_in">int</span> hashCode();</span><br></pre></td></tr></table></figure>

</details>]]></content>
      <categories>
        <category>java</category>
        <category>javaé›†åˆ</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>é›†åˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>èµ„æºæ¸…å•</title>
    <url>/post/71d60cd0.html</url>
    <content><![CDATA[<h1 id="å»ºç«™ï¼š"><a href="#å»ºç«™ï¼š" class="headerlink" title="å»ºç«™ï¼š"></a>å»ºç«™ï¼š</h1><ul>
<li>ä¸»ç«™ç‚¹:      <a href="https://hexo.io/" target="_blank" rel="noopener">https://hexo.io/</a></li>
<li>nextä¸»é¢˜:    <a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">http://theme-next.iissnan.com/</a></li>
<li>æ ‡ç­¾äº‘:      <a href="https://github.com/MikeCoder/hexo-tag-cloud/blob/master/README.ZH.md" target="_blank" rel="noopener">https://github.com/MikeCoder/hexo-tag-cloud/blob/master/README.ZH.md</a></li>
<li>æ–‡ä»¶å”¯ä¸€idèŠ‚ç‚¹:<a href="https://github.com/rozbo/hexo-abbrlink" target="_blank" rel="noopener">https://github.com/rozbo/hexo-abbrlink</a></li>
</ul>
<h1 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h1><ul>
<li>pptæ•™ç¨‹:<a href="https://www.bilibili.com/video/av54211804?p=1" target="_blank" rel="noopener">https://www.bilibili.com/video/av54211804?p=1</a></li>
</ul>
]]></content>
      <categories>
        <category>èµ„æº</category>
      </categories>
      <tags>
        <tag>èµ„æº</tag>
        <tag>ppt</tag>
        <tag>æ”¶è—å¤¹</tag>
        <tag>æ”¶è—</tag>
      </tags>
  </entry>
</search>
